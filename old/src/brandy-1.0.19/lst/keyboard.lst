  Sun Jan  9 2022 20:52                                                Page 1


                     ***************************************
                     **      WDC 65C816 Macro Assembler   **
                     **                                   **
                     **     Version 3.49.1- Feb  6 2006    **
                     ***************************************

     1                        ;:ts=8
     2             00000001   R0	equ	1
     3             00000005   R1	equ	5
     4             00000009   R2	equ	9
     5             0000000D   R3	equ	13
     6                        	code
     7                        	func
     8                        ~~push_key:
     9                        	longa	on
    10                        	longi	on
    11 00:0000: 3B           	tsc
    12 00:0001: 38           	sec
    13 00:0002: E9 04 00     	sbc	#L2
    14 00:0005: 1B           	tcs
    15 00:0006: 0B           	phd
    16 00:0007: 5B           	tcd
    17             00000004   ch_0	set	4
    18 00:0008: EE xx xx     	inc	|~~holdcount
    19 00:000B: AD xx xx     	lda	|~~holdcount
    20 00:000E: 0A           	asl	A
    21 00:000F: 85 01        	sta	<R0
    22 00:0011: A5 08        	lda	<L2+ch_0
    23 00:0013: A6 01        	ldx	<R0
    24 00:0015: 9D xx xx     	sta	|~~holdstack,X
    25                        L4:
    26 00:0018: A5 06        	lda	<L2+2
    27 00:001A: 85 08        	sta	<L2+2+2
    28 00:001C: A5 05        	lda	<L2+1
    29 00:001E: 85 07        	sta	<L2+1+2
    30 00:0020: 2B           	pld
    31 00:0021: 3B           	tsc
    32 00:0022: 18           	clc
    33 00:0023: 69 06 00     	adc	#L2+2
    34 00:0026: 1B           	tcs
    35 00:0027: 6B           	rtl
    36             00000004   L2	equ	4
    37             00000005   L3	equ	5
    38                        	ends
    39                        	efunc
    40                        	code
    41                        	func
    42                        ~~pop_key:
    43                        	longa	on
    44                        	longi	on
    45 00:0028: 3B           	tsc
    46 00:0029: 38           	sec
    47 00:002A: E9 08 00     	sbc	#L5
    48 00:002D: 1B           	tcs
    49 00:002E: 0B           	phd
    50 00:002F: 5B           	tcd
    51 00:0030: AD xx xx     	lda	|~~holdcount
    52 00:0033: 85 05        	sta	<R1
  Sun Jan  9 2022 20:52                                                Page 2


    53 00:0035: CE xx xx     	dec	|~~holdcount
    54 00:0038: A5 05        	lda	<R1
    55 00:003A: 0A           	asl	A
    56 00:003B: 85 01        	sta	<R0
    57 00:003D: A6 01        	ldx	<R0
    58 00:003F: BD xx xx     	lda	|~~holdstack,X
    59                        L7:
    60 00:0042: A8           	tay
    61 00:0043: 2B           	pld
    62 00:0044: 3B           	tsc
    63 00:0045: 18           	clc
    64 00:0046: 69 08 00     	adc	#L5
    65 00:0049: 1B           	tcs
    66 00:004A: 98           	tya
    67 00:004B: 6B           	rtl
    68             00000008   L5	equ	8
    69             00000009   L6	equ	9
    70                        	ends
    71                        	efunc
    72                        	code
    73                        	xdef	~~set_fn_string
    74                        	func
    75                        ~~set_fn_string:
    76                        	longa	on
    77                        	longi	on
    78 00:004C: 3B           	tsc
    79 00:004D: 38           	sec
    80 00:004E: E9 10 00     	sbc	#L8
    81 00:0051: 1B           	tcs
    82 00:0052: 0B           	phd
    83 00:0053: 5B           	tcd
    84             00000004   key_0	set	4
    85             00000006   string_0	set	6
    86             0000000A   length_0	set	10
    87 00:0054: A5 14        	lda	<L8+key_0
    88 00:0056: 0A           	asl	A
    89 00:0057: 65 14        	adc	<L8+key_0
    90 00:0059: 0A           	asl	A
    91 00:005A: 85 01        	sta	<R0
    92 00:005C: 18           	clc
    93 00:005D: A9 02 00     	lda	#$2
    94 00:0060: 69 xx xx     	adc	#<~~fn_key
    95 00:0063: 85 05        	sta	<R1
    96 00:0065: 18           	clc
    97 00:0066: A5 05        	lda	<R1
    98 00:0068: 65 01        	adc	<R0
    99 00:006A: 85 09        	sta	<R2
   100 00:006C: B2 09        	lda	(<R2)
   101 00:006E: A0 02 00     	ldy	#$2
   102 00:0071: 11 09        	ora	(<R2),Y
   103 00:0073: D0 03        	bne	L10
   104 00:0075: 82 25 00     	brl	L10001
   105                        L10:
   106 00:0078: A5 14        	lda	<L8+key_0
   107 00:007A: 0A           	asl	A
   108 00:007B: 65 14        	adc	<L8+key_0
   109 00:007D: 0A           	asl	A
   110 00:007E: 85 01        	sta	<R0
  Sun Jan  9 2022 20:52                                                Page 3


   111 00:0080: 18           	clc
   112 00:0081: A9 02 00     	lda	#$2
   113 00:0084: 69 xx xx     	adc	#<~~fn_key
   114 00:0087: 85 05        	sta	<R1
   115 00:0089: 18           	clc
   116 00:008A: A5 05        	lda	<R1
   117 00:008C: 65 01        	adc	<R0
   118 00:008E: 85 09        	sta	<R2
   119 00:0090: A0 02 00     	ldy	#$2
   120 00:0093: B1 09        	lda	(<R2),Y
   121 00:0095: 48           	pha
   122 00:0096: B2 09        	lda	(<R2)
   123 00:0098: 48           	pha
   124 00:0099: 22 xx xx xx  	jsl	~~free
   125                        L10001:
   126 00:009D: A5 14        	lda	<L8+key_0
   127 00:009F: 0A           	asl	A
   128 00:00A0: 65 14        	adc	<L8+key_0
   129 00:00A2: 0A           	asl	A
   130 00:00A3: 85 01        	sta	<R0
   131 00:00A5: A5 1A        	lda	<L8+length_0
   132 00:00A7: A6 01        	ldx	<R0
   133 00:00A9: 9D xx xx     	sta	|~~fn_key,X
   134 00:00AC: A5 14        	lda	<L8+key_0
   135 00:00AE: 0A           	asl	A
   136 00:00AF: 65 14        	adc	<L8+key_0
   137 00:00B1: 0A           	asl	A
   138 00:00B2: 85 01        	sta	<R0
   139 00:00B4: 18           	clc
   140 00:00B5: A9 02 00     	lda	#$2
   141 00:00B8: 69 xx xx     	adc	#<~~fn_key
   142 00:00BB: 85 05        	sta	<R1
   143 00:00BD: 18           	clc
   144 00:00BE: A5 05        	lda	<R1
   145 00:00C0: 65 01        	adc	<R0
   146 00:00C2: 85 09        	sta	<R2
   147 00:00C4: A0 00 00     	ldy	#$0
   148 00:00C7: A5 1A        	lda	<L8+length_0
   149 00:00C9: 10 01        	bpl	L11
   150 00:00CB: 88           	dey
   151                        L11:
   152 00:00CC: 85 01        	sta	<R0
   153 00:00CE: 84 03        	sty	<R0+2
   154 00:00D0: D4 03        	pei	<R0+2
   155 00:00D2: D4 01        	pei	<R0
   156 00:00D4: 22 xx xx xx  	jsl	~~malloc
   157 00:00D8: 85 05        	sta	<R1
   158 00:00DA: 86 07        	stx	<R1+2
   159 00:00DC: A5 05        	lda	<R1
   160 00:00DE: 92 09        	sta	(<R2)
   161 00:00E0: A5 07        	lda	<R1+2
   162 00:00E2: A0 02 00     	ldy	#$2
   163 00:00E5: 91 09        	sta	(<R2),Y
   164 00:00E7: A5 14        	lda	<L8+key_0
   165 00:00E9: 0A           	asl	A
   166 00:00EA: 65 14        	adc	<L8+key_0
   167 00:00EC: 0A           	asl	A
   168 00:00ED: 85 01        	sta	<R0
  Sun Jan  9 2022 20:52                                                Page 4


   169 00:00EF: 18           	clc
   170 00:00F0: A9 02 00     	lda	#$2
   171 00:00F3: 69 xx xx     	adc	#<~~fn_key
   172 00:00F6: 85 05        	sta	<R1
   173 00:00F8: 18           	clc
   174 00:00F9: A5 05        	lda	<R1
   175 00:00FB: 65 01        	adc	<R0
   176 00:00FD: 85 09        	sta	<R2
   177 00:00FF: B2 09        	lda	(<R2)
   178 00:0101: A0 02 00     	ldy	#$2
   179 00:0104: 11 09        	ora	(<R2),Y
   180 00:0106: D0 03        	bne	L12
   181 00:0108: 82 39 00     	brl	L10002
   182                        L12:
   183 00:010B: A0 00 00     	ldy	#$0
   184 00:010E: A5 1A        	lda	<L8+length_0
   185 00:0110: 10 01        	bpl	L13
   186 00:0112: 88           	dey
   187                        L13:
   188 00:0113: 85 01        	sta	<R0
   189 00:0115: 84 03        	sty	<R0+2
   190 00:0117: D4 03        	pei	<R0+2
   191 00:0119: D4 01        	pei	<R0
   192 00:011B: D4 18        	pei	<L8+string_0+2
   193 00:011D: D4 16        	pei	<L8+string_0
   194 00:011F: A5 14        	lda	<L8+key_0
   195 00:0121: 0A           	asl	A
   196 00:0122: 65 14        	adc	<L8+key_0
   197 00:0124: 0A           	asl	A
   198 00:0125: 85 05        	sta	<R1
   199 00:0127: 18           	clc
   200 00:0128: A9 02 00     	lda	#$2
   201 00:012B: 69 xx xx     	adc	#<~~fn_key
   202 00:012E: 85 09        	sta	<R2
   203 00:0130: 18           	clc
   204 00:0131: A5 09        	lda	<R2
   205 00:0133: 65 05        	adc	<R1
   206 00:0135: 85 0D        	sta	<R3
   207 00:0137: A0 02 00     	ldy	#$2
   208 00:013A: B1 0D        	lda	(<R3),Y
   209 00:013C: 48           	pha
   210 00:013D: B2 0D        	lda	(<R3)
   211 00:013F: 48           	pha
   212 00:0140: 22 xx xx xx  	jsl	~~memcpy
   213                        L10002:
   214                        L14:
   215 00:0144: A5 12        	lda	<L8+2
   216 00:0146: 85 1A        	sta	<L8+2+8
   217 00:0148: A5 11        	lda	<L8+1
   218 00:014A: 85 19        	sta	<L8+1+8
   219 00:014C: 2B           	pld
   220 00:014D: 3B           	tsc
   221 00:014E: 18           	clc
   222 00:014F: 69 18 00     	adc	#L8+8
   223 00:0152: 1B           	tcs
   224 00:0153: 6B           	rtl
   225             00000010   L8	equ	16
   226             00000011   L9	equ	17
  Sun Jan  9 2022 20:52                                                Page 5


   227                        	ends
   228                        	efunc
   229                        	code
   230                        	func
   231                        ~~switch_fn_string:
   232                        	longa	on
   233                        	longi	on
   234 00:0154: 3B           	tsc
   235 00:0155: 38           	sec
   236 00:0156: E9 0E 00     	sbc	#L15
   237 00:0159: 1B           	tcs
   238 00:015A: 0B           	phd
   239 00:015B: 5B           	tcd
   240             00000004   key_0	set	4
   241             00000000   ch_1	set	0
   242 00:015C: A5 12        	lda	<L15+key_0
   243 00:015E: 0A           	asl	A
   244 00:015F: 65 12        	adc	<L15+key_0
   245 00:0161: 0A           	asl	A
   246 00:0162: 85 01        	sta	<R0
   247 00:0164: A6 01        	ldx	<R0
   248 00:0166: BD xx xx     	lda	|~~fn_key,X
   249 00:0169: C9 01 00     	cmp	#<$1
   250 00:016C: F0 03        	beq	L17
   251 00:016E: 82 3A 00     	brl	L10003
   252                        L17:
   253 00:0171: A5 12        	lda	<L15+key_0
   254 00:0173: 0A           	asl	A
   255 00:0174: 65 12        	adc	<L15+key_0
   256 00:0176: 0A           	asl	A
   257 00:0177: 85 01        	sta	<R0
   258 00:0179: 18           	clc
   259 00:017A: A9 02 00     	lda	#$2
   260 00:017D: 69 xx xx     	adc	#<~~fn_key
   261 00:0180: 85 05        	sta	<R1
   262 00:0182: 18           	clc
   263 00:0183: A5 05        	lda	<R1
   264 00:0185: 65 01        	adc	<R0
   265 00:0187: 85 09        	sta	<R2
   266 00:0189: B2 09        	lda	(<R2)
   267 00:018B: 85 01        	sta	<R0
   268 00:018D: A0 02 00     	ldy	#$2
   269 00:0190: B1 09        	lda	(<R2),Y
   270 00:0192: 85 03        	sta	<R0+2
   271 00:0194: A7 01        	lda	[<R0]
   272 00:0196: 29 FF 00     	and	#$ff
   273                        L18:
   274 00:0199: A8           	tay
   275 00:019A: A5 10        	lda	<L15+2
   276 00:019C: 85 12        	sta	<L15+2+2
   277 00:019E: A5 0F        	lda	<L15+1
   278 00:01A0: 85 11        	sta	<L15+1+2
   279 00:01A2: 2B           	pld
   280 00:01A3: 3B           	tsc
   281 00:01A4: 18           	clc
   282 00:01A5: 69 10 00     	adc	#L15+2
   283 00:01A8: 1B           	tcs
   284 00:01A9: 98           	tya
  Sun Jan  9 2022 20:52                                                Page 6


   285 00:01AA: 6B           	rtl
   286                        L10003:
   287 00:01AB: A5 12        	lda	<L15+key_0
   288 00:01AD: 0A           	asl	A
   289 00:01AE: 65 12        	adc	<L15+key_0
   290 00:01B0: 0A           	asl	A
   291 00:01B1: 85 01        	sta	<R0
   292 00:01B3: 18           	clc
   293 00:01B4: A9 02 00     	lda	#$2
   294 00:01B7: 69 xx xx     	adc	#<~~fn_key
   295 00:01BA: 85 05        	sta	<R1
   296 00:01BC: 18           	clc
   297 00:01BD: A5 05        	lda	<R1
   298 00:01BF: 65 01        	adc	<R0
   299 00:01C1: 85 09        	sta	<R2
   300 00:01C3: B2 09        	lda	(<R2)
   301 00:01C5: 8D xx xx     	sta	|~~fn_string
   302 00:01C8: A0 02 00     	ldy	#$2
   303 00:01CB: B1 09        	lda	(<R2),Y
   304 00:01CD: 8D xx xx     	sta	|~~fn_string+2
   305 00:01D0: A5 12        	lda	<L15+key_0
   306 00:01D2: 0A           	asl	A
   307 00:01D3: 65 12        	adc	<L15+key_0
   308 00:01D5: 0A           	asl	A
   309 00:01D6: 85 01        	sta	<R0
   310 00:01D8: 18           	clc
   311 00:01D9: A9 FF FF     	lda	#$ffff
   312 00:01DC: A6 01        	ldx	<R0
   313 00:01DE: 7D xx xx     	adc	|~~fn_key,X
   314 00:01E1: 8D xx xx     	sta	|~~fn_string_count
   315 00:01E4: AD xx xx     	lda	|~~fn_string
   316 00:01E7: 85 01        	sta	<R0
   317 00:01E9: AD xx xx     	lda	|~~fn_string+2
   318 00:01EC: 85 03        	sta	<R0+2
   319 00:01EE: A7 01        	lda	[<R0]
   320 00:01F0: 29 FF 00     	and	#$ff
   321 00:01F3: 85 0D        	sta	<L16+ch_1
   322 00:01F5: EE xx xx     	inc	|~~fn_string
   323 00:01F8: D0 03        	bne	L19
   324 00:01FA: EE xx xx     	inc	|~~fn_string+2
   325                        L19:
   326 00:01FD: A5 0D        	lda	<L16+ch_1
   327 00:01FF: 82 97 FF     	brl	L18
   328             0000000E   L15	equ	14
   329             0000000D   L16	equ	13
   330                        	ends
   331                        	efunc
   332                        	code
   333                        	func
   334                        ~~read_fn_string:
   335                        	longa	on
   336                        	longi	on
   337 00:0202: 3B           	tsc
   338 00:0203: 38           	sec
   339 00:0204: E9 06 00     	sbc	#L20
   340 00:0207: 1B           	tcs
   341 00:0208: 0B           	phd
   342 00:0209: 5B           	tcd
  Sun Jan  9 2022 20:52                                                Page 7


   343             00000000   ch_1	set	0
   344 00:020A: AD xx xx     	lda	|~~fn_string
   345 00:020D: 85 01        	sta	<R0
   346 00:020F: AD xx xx     	lda	|~~fn_string+2
   347 00:0212: 85 03        	sta	<R0+2
   348 00:0214: A7 01        	lda	[<R0]
   349 00:0216: 29 FF 00     	and	#$ff
   350 00:0219: 85 05        	sta	<L21+ch_1
   351 00:021B: EE xx xx     	inc	|~~fn_string
   352 00:021E: D0 03        	bne	L22
   353 00:0220: EE xx xx     	inc	|~~fn_string+2
   354                        L22:
   355 00:0223: CE xx xx     	dec	|~~fn_string_count
   356 00:0226: AD xx xx     	lda	|~~fn_string_count
   357 00:0229: F0 03        	beq	L23
   358 00:022B: 82 06 00     	brl	L10004
   359                        L23:
   360 00:022E: 9C xx xx     	stz	|~~fn_string
   361 00:0231: 9C xx xx     	stz	|~~fn_string+2
   362                        L10004:
   363 00:0234: A5 05        	lda	<L21+ch_1
   364                        L24:
   365 00:0236: A8           	tay
   366 00:0237: 2B           	pld
   367 00:0238: 3B           	tsc
   368 00:0239: 18           	clc
   369 00:023A: 69 06 00     	adc	#L20
   370 00:023D: 1B           	tcs
   371 00:023E: 98           	tya
   372 00:023F: 6B           	rtl
   373             00000006   L20	equ	6
   374             00000005   L21	equ	5
   375                        	ends
   376                        	efunc
   377                        	code
   378                        	func
   379                        ~~is_fn_key:
   380                        	longa	on
   381                        	longi	on
   382 00:0240: 3B           	tsc
   383 00:0241: 38           	sec
   384 00:0242: E9 00 00     	sbc	#L25
   385 00:0245: 1B           	tcs
   386 00:0246: 0B           	phd
   387 00:0247: 5B           	tcd
   388             00000004   key_0	set	4
   389 00:0248: 38           	sec
   390 00:0249: A5 04        	lda	<L25+key_0
   391 00:024B: E9 81 00     	sbc	#<$81
   392 00:024E: 70 03        	bvs	L27
   393 00:0250: 49 00 80     	eor	#$8000
   394                        L27:
   395 00:0253: 30 03        	bmi	L28
   396 00:0255: 82 28 00     	brl	L10005
   397                        L28:
   398 00:0258: 38           	sec
   399 00:0259: A9 89 00     	lda	#$89
   400 00:025C: E5 04        	sbc	<L25+key_0
  Sun Jan  9 2022 20:52                                                Page 8


   401 00:025E: 70 03        	bvs	L29
   402 00:0260: 49 00 80     	eor	#$8000
   403                        L29:
   404 00:0263: 30 03        	bmi	L30
   405 00:0265: 82 18 00     	brl	L10005
   406                        L30:
   407 00:0268: 18           	clc
   408 00:0269: A9 80 FF     	lda	#$ff80
   409 00:026C: 65 04        	adc	<L25+key_0
   410                        L31:
   411 00:026E: A8           	tay
   412 00:026F: A5 02        	lda	<L25+2
   413 00:0271: 85 04        	sta	<L25+2+2
   414 00:0273: A5 01        	lda	<L25+1
   415 00:0275: 85 03        	sta	<L25+1+2
   416 00:0277: 2B           	pld
   417 00:0278: 3B           	tsc
   418 00:0279: 18           	clc
   419 00:027A: 69 02 00     	adc	#L25+2
   420 00:027D: 1B           	tcs
   421 00:027E: 98           	tya
   422 00:027F: 6B           	rtl
   423                        L10005:
   424 00:0280: 38           	sec
   425 00:0281: A5 04        	lda	<L25+key_0
   426 00:0283: E9 CA 00     	sbc	#<$ca
   427 00:0286: 70 03        	bvs	L32
   428 00:0288: 49 00 80     	eor	#$8000
   429                        L32:
   430 00:028B: 30 03        	bmi	L33
   431 00:028D: 82 19 00     	brl	L10006
   432                        L33:
   433 00:0290: 38           	sec
   434 00:0291: A9 CC 00     	lda	#$cc
   435 00:0294: E5 04        	sbc	<L25+key_0
   436 00:0296: 70 03        	bvs	L34
   437 00:0298: 49 00 80     	eor	#$8000
   438                        L34:
   439 00:029B: 30 03        	bmi	L35
   440 00:029D: 82 09 00     	brl	L10006
   441                        L35:
   442 00:02A0: 18           	clc
   443 00:02A1: A9 40 FF     	lda	#$ff40
   444 00:02A4: 65 04        	adc	<L25+key_0
   445 00:02A6: 82 C5 FF     	brl	L31
   446                        L10006:
   447 00:02A9: A9 00 00     	lda	#$0
   448 00:02AC: 82 BF FF     	brl	L31
   449             00000000   L25	equ	0
   450             00000001   L26	equ	1
   451                        	ends
   452                        	efunc
   453                        	code
   454                        	func
   455                        ~~waitkey:
   456                        	longa	on
   457                        	longi	on
   458 00:02AF: 3B           	tsc
  Sun Jan  9 2022 20:52                                                Page 9


   459 00:02B0: 38           	sec
   460 00:02B1: E9 A2 00     	sbc	#L36
   461 00:02B4: 1B           	tcs
   462 00:02B5: 0B           	phd
   463 00:02B6: 5B           	tcd
   464             00000004   wait_0	set	4
   465             00000000   keyset_1	set	0
   466             00000080   waitime_1	set	128
   467             00000088   available_1	set	136
   468 00:02B7: F4 00 00     	pea	#^$80
   469 00:02BA: F4 80 00     	pea	#<$80
   470 00:02BD: F4 00 00     	pea	#<$0
   471 00:02C0: F4 00 00     	pea	#0
   472 00:02C3: 18           	clc
   473 00:02C4: 7B           	tdc
   474 00:02C5: 69 19 00     	adc	#<L37+keyset_1
   475 00:02C8: 48           	pha
   476 00:02C9: 22 xx xx xx  	jsl	~~memset
   477 00:02CD: F4 00 00     	pea	#^$1
   478 00:02D0: F4 01 00     	pea	#<$1
   479 00:02D3: AD xx xx     	lda	|~~keyboard
   480 00:02D6: 29 1F 00     	and	#<$1f
   481 00:02D9: 85 05        	sta	<R1
   482 00:02DB: 64 07        	stz	<R1+2
   483 00:02DD: A5 05        	lda	<R1
   484                        	xref	~~~lasl
   485 00:02DF: 22 xx xx xx  	jsl	~~~lasl
   486 00:02E3: 85 01        	sta	<R0
   487 00:02E5: 86 03        	stx	<R0+2
   488 00:02E7: A0 00 00     	ldy	#$0
   489 00:02EA: AD xx xx     	lda	|~~keyboard
   490 00:02ED: 10 01        	bpl	L38
   491 00:02EF: 88           	dey
   492                        L38:
   493 00:02F0: 85 0D        	sta	<R3
   494 00:02F2: 84 0F        	sty	<R3+2
   495 00:02F4: D4 0F        	pei	<R3+2
   496 00:02F6: D4 0D        	pei	<R3
   497 00:02F8: A9 05 00     	lda	#$5
   498                        	xref	~~~llsr
   499 00:02FB: 22 xx xx xx  	jsl	~~~llsr
   500 00:02FF: 85 09        	sta	<R2
   501 00:0301: 86 0B        	stx	<R2+2
   502 00:0303: D4 0B        	pei	<R2+2
   503 00:0305: D4 09        	pei	<R2
   504 00:0307: A9 02 00     	lda	#$2
   505                        	xref	~~~lasl
   506 00:030A: 22 xx xx xx  	jsl	~~~lasl
   507 00:030E: 85 05        	sta	<R1
   508 00:0310: 86 07        	stx	<R1+2
   509 00:0312: 18           	clc
   510 00:0313: 7B           	tdc
   511 00:0314: 69 19 00     	adc	#<L37+keyset_1
   512 00:0317: 85 11        	sta	<17
   513 00:0319: A9 00 00     	lda	#$0
   514 00:031C: 85 13        	sta	<17+2
   515 00:031E: 18           	clc
   516 00:031F: A5 11        	lda	<17
  Sun Jan  9 2022 20:52                                                Page 10


   517 00:0321: 65 05        	adc	<R1
   518 00:0323: 85 15        	sta	<21
   519 00:0325: A5 13        	lda	<17+2
   520 00:0327: 65 07        	adc	<R1+2
   521 00:0329: 85 17        	sta	<21+2
   522 00:032B: A7 15        	lda	[<21]
   523 00:032D: 05 01        	ora	<R0
   524 00:032F: 87 15        	sta	[<21]
   525 00:0331: A0 02 00     	ldy	#$2
   526 00:0334: B7 15        	lda	[<21],Y
   527 00:0336: 05 03        	ora	<R0+2
   528 00:0338: A0 02 00     	ldy	#$2
   529 00:033B: 97 15        	sta	[<21],Y
   530 00:033D: A5 A6        	lda	<L36+wait_0
   531 00:033F: A2 64 00     	ldx	#<$64
   532                        	xref	~~~div
   533 00:0342: 22 xx xx xx  	jsl	~~~div
   534 00:0346: 85 01        	sta	<R0
   535 00:0348: A0 00 00     	ldy	#$0
   536 00:034B: A5 01        	lda	<R0
   537 00:034D: 10 01        	bpl	L39
   538 00:034F: 88           	dey
   539                        L39:
   540 00:0350: 85 99        	sta	<L37+waitime_1
   541 00:0352: 84 9B        	sty	<L37+waitime_1+2
   542 00:0354: A5 A6        	lda	<L36+wait_0
   543 00:0356: A2 64 00     	ldx	#<$64
   544                        	xref	~~~mod
   545 00:0359: 22 xx xx xx  	jsl	~~~mod
   546 00:035D: 85 01        	sta	<R0
   547 00:035F: A5 01        	lda	<R0
   548 00:0361: A2 10 27     	ldx	#<$2710
   549                        	xref	~~~mul
   550 00:0364: 22 xx xx xx  	jsl	~~~mul
   551 00:0368: 85 01        	sta	<R0
   552 00:036A: A0 00 00     	ldy	#$0
   553 00:036D: A5 01        	lda	<R0
   554 00:036F: 10 01        	bpl	L40
   555 00:0371: 88           	dey
   556                        L40:
   557 00:0372: 85 9D        	sta	<L37+waitime_1+4
   558 00:0374: 84 9F        	sty	<L37+waitime_1+6
   559 00:0376: 64 01        	stz	<R0
   560 00:0378: 38           	sec
   561 00:0379: A9 00 00     	lda	#$0
   562 00:037C: E5 A1        	sbc	<L37+available_1
   563 00:037E: 70 03        	bvs	L42
   564 00:0380: 49 00 80     	eor	#$8000
   565                        L42:
   566 00:0383: 10 03        	bpl	L43
   567 00:0385: 82 02 00     	brl	L41
   568                        L43:
   569 00:0388: E6 01        	inc	<R0
   570                        L41:
   571 00:038A: A5 01        	lda	<R0
   572 00:038C: 29 FF 00     	and	#$ff
   573                        L44:
   574 00:038F: A8           	tay
  Sun Jan  9 2022 20:52                                                Page 11


   575 00:0390: A5 A4        	lda	<L36+2
   576 00:0392: 85 A6        	sta	<L36+2+2
   577 00:0394: A5 A3        	lda	<L36+1
   578 00:0396: 85 A5        	sta	<L36+1+2
   579 00:0398: 2B           	pld
   580 00:0399: 3B           	tsc
   581 00:039A: 18           	clc
   582 00:039B: 69 A4 00     	adc	#L36+2
   583 00:039E: 1B           	tcs
   584 00:039F: 98           	tya
   585 00:03A0: 6B           	rtl
   586             000000A2   L36	equ	162
   587             00000019   L37	equ	25
   588                        	ends
   589                        	efunc
   590                        	code
   591                        	xdef	~~read_key
   592                        	func
   593                        ~~read_key:
   594                        	longa	on
   595                        	longi	on
   596 00:03A1: 3B           	tsc
   597 00:03A2: 38           	sec
   598 00:03A3: E9 07 00     	sbc	#L45
   599 00:03A6: 1B           	tcs
   600 00:03A7: 0B           	phd
   601 00:03A8: 5B           	tcd
   602             00000000   ch_1	set	0
   603             00000001   errcode_1	set	1
   604 00:03A9: F4 00 00     	pea	#^$1
   605 00:03AC: F4 01 00     	pea	#<$1
   606 00:03AF: F4 00 00     	pea	#0
   607 00:03B2: 18           	clc
   608 00:03B3: 7B           	tdc
   609 00:03B4: 69 05 00     	adc	#<L46+ch_1
   610 00:03B7: 48           	pha
   611 00:03B8: AD xx xx     	lda	|~~keyboard
   612 00:03BB: 48           	pha
   613 00:03BC: 22 xx xx xx  	jsl	~~read
   614 00:03C0: 85 06        	sta	<L46+errcode_1
   615 00:03C2: A5 06        	lda	<L46+errcode_1
   616 00:03C4: 30 03        	bmi	L47
   617 00:03C6: 82 2F 00     	brl	L10007
   618                        L47:
   619 00:03C9: 22 xx xx xx  	jsl	~~__errno_location
   620 00:03CD: 85 01        	sta	<R0
   621 00:03CF: 86 03        	stx	<R0+2
   622 00:03D1: A7 01        	lda	[<R0]
   623 00:03D3: C9 20 00     	cmp	#<$20
   624 00:03D6: F0 03        	beq	L48
   625 00:03D8: 82 0A 00     	brl	L10008
   626                        L48:
   627 00:03DB: F4 08 00     	pea	#<$8
   628 00:03DE: F4 04 00     	pea	#4
   629 00:03E1: 22 xx xx xx  	jsl	~~error
   630                        L10008:
   631 00:03E5: F4 xx xx     	pea	#^L1
   632 00:03E8: F4 xx xx     	pea	#<L1
  Sun Jan  9 2022 20:52                                                Page 12


   633 00:03EB: F4 9D 01     	pea	#<$19d
   634 00:03EE: F4 82 00     	pea	#<$82
   635 00:03F1: F4 0A 00     	pea	#10
   636 00:03F4: 22 xx xx xx  	jsl	~~error
   637                        L10007:
   638 00:03F8: A5 05        	lda	<L46+ch_1
   639 00:03FA: 29 FF 00     	and	#$ff
   640                        L49:
   641 00:03FD: A8           	tay
   642 00:03FE: 2B           	pld
   643 00:03FF: 3B           	tsc
   644 00:0400: 18           	clc
   645 00:0401: 69 07 00     	adc	#L45
   646 00:0404: 1B           	tcs
   647 00:0405: 98           	tya
   648 00:0406: 6B           	rtl
   649             00000007   L45	equ	7
   650             00000005   L46	equ	5
   651                        	ends
   652                        	efunc
   653                        	data
   654                        L1:
   655 00:0000: 6B 65 79 62  	db	$6B,$65,$79,$62,$6F,$61,$72,$64,$00
       00:0004: 6F 61 72 64 
       00:0008: 00 
   656 00:0009:              	ends
   657                        	code
   658                        	func
   659                        ~~decode_sequence:
   660                        	longa	on
   661                        	longi	on
   662 00:0407: 3B           	tsc
   663 00:0408: 38           	sec
   664 00:0409: E9 0B 00     	sbc	#L51
   665 00:040C: 1B           	tcs
   666 00:040D: 0B           	phd
   667 00:040E: 5B           	tcd
   668                        	data
   669                        L53:
   670 00:0009: 81 00 82 00  	dw	$81,$82,$83,$84,$85,$86,$87,$88,$89,$CA
       00:000D: 83 00 84 00 
       00:0011: 85 00 86 00 
       00:0015: 87 00 88 00 
       00:0019: 89 00 CA 00 
   671 00:001D: CB 00 CC 00  	dw	$CB,$CC,$93,$94,$95,$96,$97,$98,$99,$DA
       00:0021: 93 00 94 00 
       00:0025: 95 00 96 00 
       00:0029: 97 00 98 00 
       00:002D: 99 00 DA 00 
   672 00:0031:              	ends
   673                        	data
   674                        L54:
   675 00:0031: 04 00 05 00  	dw	$4,$5,$6,$7,$8,$9
       00:0035: 06 00 07 00 
       00:0039: 08 00 09 00 
   676 00:003D:              	ends
   677                        	data
   678                        L55:
  Sun Jan  9 2022 20:52                                                Page 13


   679 00:003D: 0B 00 0C 00  	dw	$B,$C,$D,$E,$F,$0,$10,$11,$12
       00:0041: 0D 00 0E 00 
       00:0045: 0F 00 00 00 
       00:0049: 10 00 11 00 
       00:004D: 12 00 
   680 00:004F:              	ends
   681                        	data
   682                        L56:
   683 00:004F: 13 00 14 00  	dw	$13,$14,$0,$15,$16,$17,$18,$0,$19,$1A
       00:0053: 00 00 15 00 
       00:0057: 16 00 17 00 
       00:005B: 18 00 00 00 
       00:005F: 19 00 1A 00 
   684 00:0063:              	ends
   685                        	data
   686                        L57:
   687 00:0063: 1B 00 1C 00  	dw	$1B,$1C,$1D,$1E
       00:0067: 1D 00 1E 00 
   688 00:006B:              	ends
   689             00000000   state_1	set	0
   690             00000002   newstate_1	set	2
   691             00000004   ch_1	set	4
   692             00000006   ok_1	set	6
   693 00:040F: A9 01 00     	lda	#$1
   694 00:0412: 85 05        	sta	<L52+state_1
   695 00:0414: E2 20        	sep	#$20
   696                        	longa	off
   697 00:0416: A9 01        	lda	#$1
   698 00:0418: 85 0B        	sta	<L52+ok_1
   699 00:041A: C2 20        	rep	#$20
   700                        	longa	on
   701                        L10009:
   702 00:041C: A5 0B        	lda	<L52+ok_1
   703 00:041E: 29 FF 00     	and	#$ff
   704 00:0421: D0 03        	bne	L58
   705 00:0423: 82 59 03     	brl	L10010
   706                        L58:
   707 00:0426: F4 0A 00     	pea	#<$a
   708 00:0429: 22 xx xx xx  	jsl	~~waitkey
   709 00:042D: 29 FF 00     	and	#$ff
   710 00:0430: D0 03        	bne	L59
   711 00:0432: 82 4A 03     	brl	L10010
   712                        L59:
   713 00:0435: 22 xx xx xx  	jsl	~~read_key
   714 00:0439: 85 09        	sta	<L52+ch_1
   715 00:043B: A5 05        	lda	<L52+state_1
   716 00:043D: 82 F6 02     	brl	L10011
   717                        L10013:
   718 00:0440: A5 09        	lda	<L52+ch_1
   719 00:0442: C9 4F 00     	cmp	#<$4f
   720 00:0445: F0 03        	beq	L60
   721 00:0447: 82 08 00     	brl	L10014
   722                        L60:
   723 00:044A: A9 02 00     	lda	#$2
   724 00:044D: 85 05        	sta	<L52+state_1
   725 00:044F: 82 18 00     	brl	L10015
   726                        L10014:
   727 00:0452: A5 09        	lda	<L52+ch_1
  Sun Jan  9 2022 20:52                                                Page 14


   728 00:0454: C9 5B 00     	cmp	#<$5b
   729 00:0457: F0 03        	beq	L61
   730 00:0459: 82 08 00     	brl	L10016
   731                        L61:
   732 00:045C: A9 03 00     	lda	#$3
   733 00:045F: 85 05        	sta	<L52+state_1
   734 00:0461: 82 06 00     	brl	L10017
   735                        L10016:
   736 00:0464: E2 20        	sep	#$20
   737                        	longa	off
   738 00:0466: 64 0B        	stz	<L52+ok_1
   739 00:0468: C2 20        	rep	#$20
   740                        	longa	on
   741                        L10017:
   742                        L10015:
   743 00:046A: 82 0F 03     	brl	L10012
   744                        L10018:
   745 00:046D: 38           	sec
   746 00:046E: A5 09        	lda	<L52+ch_1
   747 00:0470: E9 50 00     	sbc	#<$50
   748 00:0473: 70 03        	bvs	L62
   749 00:0475: 49 00 80     	eor	#$8000
   750                        L62:
   751 00:0478: 30 03        	bmi	L63
   752 00:047A: 82 28 00     	brl	L10019
   753                        L63:
   754 00:047D: 38           	sec
   755 00:047E: A9 53 00     	lda	#$53
   756 00:0481: E5 09        	sbc	<L52+ch_1
   757 00:0483: 70 03        	bvs	L64
   758 00:0485: 49 00 80     	eor	#$8000
   759                        L64:
   760 00:0488: 30 03        	bmi	L65
   761 00:048A: 82 18 00     	brl	L10019
   762                        L65:
   763 00:048D: 18           	clc
   764 00:048E: A9 31 00     	lda	#$31
   765 00:0491: 65 09        	adc	<L52+ch_1
   766 00:0493: 48           	pha
   767 00:0494: 22 xx xx xx  	jsl	~~push_key
   768 00:0498: A9 00 00     	lda	#$0
   769                        L66:
   770 00:049B: A8           	tay
   771 00:049C: 2B           	pld
   772 00:049D: 3B           	tsc
   773 00:049E: 18           	clc
   774 00:049F: 69 0B 00     	adc	#L51
   775 00:04A2: 1B           	tcs
   776 00:04A3: 98           	tya
   777 00:04A4: 6B           	rtl
   778                        L10019:
   779 00:04A5: E2 20        	sep	#$20
   780                        	longa	off
   781 00:04A7: 64 0B        	stz	<L52+ok_1
   782 00:04A9: C2 20        	rep	#$20
   783                        	longa	on
   784 00:04AB: 82 CE 02     	brl	L10012
   785                        L10020:
  Sun Jan  9 2022 20:52                                                Page 15


   786 00:04AE: A5 09        	lda	<L52+ch_1
   787 00:04B0: 82 67 00     	brl	L10021
   788                        L10023:
   789 00:04B3: F4 8F 00     	pea	#<$8f
   790 00:04B6: 22 xx xx xx  	jsl	~~push_key
   791 00:04BA: A9 00 00     	lda	#$0
   792 00:04BD: 82 DB FF     	brl	L66
   793                        L10024:
   794 00:04C0: F4 8E 00     	pea	#<$8e
   795 00:04C3: 22 xx xx xx  	jsl	~~push_key
   796 00:04C7: A9 00 00     	lda	#$0
   797 00:04CA: 82 CE FF     	brl	L66
   798                        L10025:
   799 00:04CD: F4 8D 00     	pea	#<$8d
   800 00:04D0: 22 xx xx xx  	jsl	~~push_key
   801 00:04D4: A9 00 00     	lda	#$0
   802 00:04D7: 82 C1 FF     	brl	L66
   803                        L10026:
   804 00:04DA: F4 8C 00     	pea	#<$8c
   805 00:04DD: 22 xx xx xx  	jsl	~~push_key
   806 00:04E1: A9 00 00     	lda	#$0
   807 00:04E4: 82 B4 FF     	brl	L66
   808                        L10027:
   809 00:04E7: F4 8B 00     	pea	#<$8b
   810 00:04EA: 22 xx xx xx  	jsl	~~push_key
   811 00:04EE: A9 00 00     	lda	#$0
   812 00:04F1: 82 A7 FF     	brl	L66
   813                        L10028:
   814 00:04F4: A9 1E 00     	lda	#$1e
   815 00:04F7: 82 A1 FF     	brl	L66
   816                        L10029:
   817                        L10030:
   818                        L10031:
   819                        L10032:
   820                        L10033:
   821                        L10034:
   822 00:04FA: A5 09        	lda	<L52+ch_1
   823 00:04FC: 0A           	asl	A
   824 00:04FD: 85 01        	sta	<R0
   825 00:04FF: A6 01        	ldx	<R0
   826 00:0501: BD xx xx     	lda	|L54-98,X
   827 00:0504: 85 05        	sta	<L52+state_1
   828 00:0506: 82 4D 00     	brl	L10022
   829                        L10035:
   830 00:0509: A9 0A 00     	lda	#$a
   831 00:050C: 85 05        	sta	<L52+state_1
   832 00:050E: 82 45 00     	brl	L10022
   833                        L10036:
   834 00:0511: E2 20        	sep	#$20
   835                        	longa	off
   836 00:0513: 64 0B        	stz	<L52+ok_1
   837 00:0515: C2 20        	rep	#$20
   838                        	longa	on
   839 00:0517: 82 3C 00     	brl	L10022
   840                        L10021:
   841                        	xref	~~~swt
   842 00:051A: 22 xx xx xx  	jsl	~~~swt
   843 00:051E: 0D 00        	dw	13
  Sun Jan  9 2022 20:52                                                Page 16


   844 00:0520: 31 00        	dw	49
   845 00:0522: xx xx        	dw	L10029-1
   846 00:0524: 32 00        	dw	50
   847 00:0526: xx xx        	dw	L10030-1
   848 00:0528: 33 00        	dw	51
   849 00:052A: xx xx        	dw	L10031-1
   850 00:052C: 34 00        	dw	52
   851 00:052E: xx xx        	dw	L10032-1
   852 00:0530: 35 00        	dw	53
   853 00:0532: xx xx        	dw	L10033-1
   854 00:0534: 36 00        	dw	54
   855 00:0536: xx xx        	dw	L10034-1
   856 00:0538: 41 00        	dw	65
   857 00:053A: xx xx        	dw	L10023-1
   858 00:053C: 42 00        	dw	66
   859 00:053E: xx xx        	dw	L10024-1
   860 00:0540: 43 00        	dw	67
   861 00:0542: xx xx        	dw	L10025-1
   862 00:0544: 44 00        	dw	68
   863 00:0546: xx xx        	dw	L10026-1
   864 00:0548: 46 00        	dw	70
   865 00:054A: xx xx        	dw	L10027-1
   866 00:054C: 48 00        	dw	72
   867 00:054E: xx xx        	dw	L10028-1
   868 00:0550: 5B 00        	dw	91
   869 00:0552: xx xx        	dw	L10035-1
   870 00:0554: xx xx        	dw	L10036-1
   871                        L10022:
   872 00:0556: 82 23 02     	brl	L10012
   873                        L10037:
   874 00:0559: 38           	sec
   875 00:055A: A5 09        	lda	<L52+ch_1
   876 00:055C: E9 31 00     	sbc	#<$31
   877 00:055F: 70 03        	bvs	L67
   878 00:0561: 49 00 80     	eor	#$8000
   879                        L67:
   880 00:0564: 30 03        	bmi	L68
   881 00:0566: 82 33 00     	brl	L10038
   882                        L68:
   883 00:0569: 38           	sec
   884 00:056A: A9 39 00     	lda	#$39
   885 00:056D: E5 09        	sbc	<L52+ch_1
   886 00:056F: 70 03        	bvs	L69
   887 00:0571: 49 00 80     	eor	#$8000
   888                        L69:
   889 00:0574: 30 03        	bmi	L70
   890 00:0576: 82 23 00     	brl	L10038
   891                        L70:
   892 00:0579: A5 09        	lda	<L52+ch_1
   893 00:057B: 0A           	asl	A
   894 00:057C: 85 01        	sta	<R0
   895 00:057E: A6 01        	ldx	<R0
   896 00:0580: BD xx xx     	lda	|L55-98,X
   897 00:0583: 85 07        	sta	<L52+newstate_1
   898 00:0585: A5 07        	lda	<L52+newstate_1
   899 00:0587: F0 03        	beq	L71
   900 00:0589: 82 09 00     	brl	L10039
   901                        L71:
  Sun Jan  9 2022 20:52                                                Page 17


   902 00:058C: E2 20        	sep	#$20
   903                        	longa	off
   904 00:058E: 64 0B        	stz	<L52+ok_1
   905 00:0590: C2 20        	rep	#$20
   906                        	longa	on
   907 00:0592: 82 04 00     	brl	L10040
   908                        L10039:
   909 00:0595: A5 07        	lda	<L52+newstate_1
   910 00:0597: 85 05        	sta	<L52+state_1
   911                        L10040:
   912 00:0599: 82 16 00     	brl	L10041
   913                        L10038:
   914 00:059C: A5 09        	lda	<L52+ch_1
   915 00:059E: C9 7E 00     	cmp	#<$7e
   916 00:05A1: F0 03        	beq	L72
   917 00:05A3: 82 06 00     	brl	L10042
   918                        L72:
   919 00:05A6: A9 1E 00     	lda	#$1e
   920 00:05A9: 82 EF FE     	brl	L66
   921                        L10042:
   922 00:05AC: E2 20        	sep	#$20
   923                        	longa	off
   924 00:05AE: 64 0B        	stz	<L52+ok_1
   925 00:05B0: C2 20        	rep	#$20
   926                        	longa	on
   927                        L10041:
   928 00:05B2: 82 C7 01     	brl	L10012
   929                        L10043:
   930 00:05B5: 38           	sec
   931 00:05B6: A5 09        	lda	<L52+ch_1
   932 00:05B8: E9 30 00     	sbc	#<$30
   933 00:05BB: 70 03        	bvs	L73
   934 00:05BD: 49 00 80     	eor	#$8000
   935                        L73:
   936 00:05C0: 30 03        	bmi	L74
   937 00:05C2: 82 33 00     	brl	L10044
   938                        L74:
   939 00:05C5: 38           	sec
   940 00:05C6: A9 39 00     	lda	#$39
   941 00:05C9: E5 09        	sbc	<L52+ch_1
   942 00:05CB: 70 03        	bvs	L75
   943 00:05CD: 49 00 80     	eor	#$8000
   944                        L75:
   945 00:05D0: 30 03        	bmi	L76
   946 00:05D2: 82 23 00     	brl	L10044
   947                        L76:
   948 00:05D5: A5 09        	lda	<L52+ch_1
   949 00:05D7: 0A           	asl	A
   950 00:05D8: 85 01        	sta	<R0
   951 00:05DA: A6 01        	ldx	<R0
   952 00:05DC: BD xx xx     	lda	|L56-96,X
   953 00:05DF: 85 07        	sta	<L52+newstate_1
   954 00:05E1: A5 07        	lda	<L52+newstate_1
   955 00:05E3: F0 03        	beq	L77
   956 00:05E5: 82 09 00     	brl	L10045
   957                        L77:
   958 00:05E8: E2 20        	sep	#$20
   959                        	longa	off
  Sun Jan  9 2022 20:52                                                Page 18


   960 00:05EA: 64 0B        	stz	<L52+ok_1
   961 00:05EC: C2 20        	rep	#$20
   962                        	longa	on
   963 00:05EE: 82 04 00     	brl	L10046
   964                        L10045:
   965 00:05F1: A5 07        	lda	<L52+newstate_1
   966 00:05F3: 85 05        	sta	<L52+state_1
   967                        L10046:
   968 00:05F5: 82 1D 00     	brl	L10047
   969                        L10044:
   970 00:05F8: A5 09        	lda	<L52+ch_1
   971 00:05FA: C9 7E 00     	cmp	#<$7e
   972 00:05FD: F0 03        	beq	L78
   973 00:05FF: 82 0D 00     	brl	L10048
   974                        L78:
   975 00:0602: F4 CD 00     	pea	#<$cd
   976 00:0605: 22 xx xx xx  	jsl	~~push_key
   977 00:0609: A9 00 00     	lda	#$0
   978 00:060C: 82 8C FE     	brl	L66
   979                        L10048:
   980 00:060F: E2 20        	sep	#$20
   981                        	longa	off
   982 00:0611: 64 0B        	stz	<L52+ok_1
   983 00:0613: C2 20        	rep	#$20
   984                        	longa	on
   985                        L10047:
   986 00:0615: 82 64 01     	brl	L10012
   987                        L10049:
   988 00:0618: 38           	sec
   989 00:0619: A5 09        	lda	<L52+ch_1
   990 00:061B: E9 31 00     	sbc	#<$31
   991 00:061E: 70 03        	bvs	L79
   992 00:0620: 49 00 80     	eor	#$8000
   993                        L79:
   994 00:0623: 30 03        	bmi	L80
   995 00:0625: 82 33 00     	brl	L10050
   996                        L80:
   997 00:0628: 38           	sec
   998 00:0629: A9 34 00     	lda	#$34
   999 00:062C: E5 09        	sbc	<L52+ch_1
  1000 00:062E: 70 03        	bvs	L81
  1001 00:0630: 49 00 80     	eor	#$8000
  1002                        L81:
  1003 00:0633: 30 03        	bmi	L82
  1004 00:0635: 82 23 00     	brl	L10050
  1005                        L82:
  1006 00:0638: A5 09        	lda	<L52+ch_1
  1007 00:063A: 0A           	asl	A
  1008 00:063B: 85 01        	sta	<R0
  1009 00:063D: A6 01        	ldx	<R0
  1010 00:063F: BD xx xx     	lda	|L57-98,X
  1011 00:0642: 85 07        	sta	<L52+newstate_1
  1012 00:0644: A5 07        	lda	<L52+newstate_1
  1013 00:0646: F0 03        	beq	L83
  1014 00:0648: 82 09 00     	brl	L10051
  1015                        L83:
  1016 00:064B: E2 20        	sep	#$20
  1017                        	longa	off
  Sun Jan  9 2022 20:52                                                Page 19


  1018 00:064D: 64 0B        	stz	<L52+ok_1
  1019 00:064F: C2 20        	rep	#$20
  1020                        	longa	on
  1021 00:0651: 82 04 00     	brl	L10052
  1022                        L10051:
  1023 00:0654: A5 07        	lda	<L52+newstate_1
  1024 00:0656: 85 05        	sta	<L52+state_1
  1025                        L10052:
  1026 00:0658: 82 16 00     	brl	L10053
  1027                        L10050:
  1028 00:065B: A5 09        	lda	<L52+ch_1
  1029 00:065D: C9 7E 00     	cmp	#<$7e
  1030 00:0660: F0 03        	beq	L84
  1031 00:0662: 82 06 00     	brl	L10054
  1032                        L84:
  1033 00:0665: A9 08 00     	lda	#$8
  1034 00:0668: 82 30 FE     	brl	L66
  1035                        L10054:
  1036 00:066B: E2 20        	sep	#$20
  1037                        	longa	off
  1038 00:066D: 64 0B        	stz	<L52+ok_1
  1039 00:066F: C2 20        	rep	#$20
  1040                        	longa	on
  1041                        L10053:
  1042 00:0671: 82 08 01     	brl	L10012
  1043                        L10055:
  1044 00:0674: A5 09        	lda	<L52+ch_1
  1045 00:0676: C9 7E 00     	cmp	#<$7e
  1046 00:0679: F0 03        	beq	L85
  1047 00:067B: 82 0D 00     	brl	L10056
  1048                        L85:
  1049 00:067E: F4 8B 00     	pea	#<$8b
  1050 00:0681: 22 xx xx xx  	jsl	~~push_key
  1051 00:0685: A9 00 00     	lda	#$0
  1052 00:0688: 82 10 FE     	brl	L66
  1053                        L10056:
  1054 00:068B: E2 20        	sep	#$20
  1055                        	longa	off
  1056 00:068D: 64 0B        	stz	<L52+ok_1
  1057 00:068F: C2 20        	rep	#$20
  1058                        	longa	on
  1059 00:0691: 82 E8 00     	brl	L10012
  1060                        L10057:
  1061 00:0694: A5 09        	lda	<L52+ch_1
  1062 00:0696: C9 7E 00     	cmp	#<$7e
  1063 00:0699: F0 03        	beq	L86
  1064 00:069B: 82 0D 00     	brl	L10058
  1065                        L86:
  1066 00:069E: F4 9F 00     	pea	#<$9f
  1067 00:06A1: 22 xx xx xx  	jsl	~~push_key
  1068 00:06A5: A9 00 00     	lda	#$0
  1069 00:06A8: 82 F0 FD     	brl	L66
  1070                        L10058:
  1071 00:06AB: E2 20        	sep	#$20
  1072                        	longa	off
  1073 00:06AD: 64 0B        	stz	<L52+ok_1
  1074 00:06AF: C2 20        	rep	#$20
  1075                        	longa	on
  Sun Jan  9 2022 20:52                                                Page 20


  1076 00:06B1: 82 C8 00     	brl	L10012
  1077                        L10059:
  1078 00:06B4: A5 09        	lda	<L52+ch_1
  1079 00:06B6: C9 7E 00     	cmp	#<$7e
  1080 00:06B9: F0 03        	beq	L87
  1081 00:06BB: 82 0D 00     	brl	L10060
  1082                        L87:
  1083 00:06BE: F4 9E 00     	pea	#<$9e
  1084 00:06C1: 22 xx xx xx  	jsl	~~push_key
  1085 00:06C5: A9 00 00     	lda	#$0
  1086 00:06C8: 82 D0 FD     	brl	L66
  1087                        L10060:
  1088 00:06CB: E2 20        	sep	#$20
  1089                        	longa	off
  1090 00:06CD: 64 0B        	stz	<L52+ok_1
  1091 00:06CF: C2 20        	rep	#$20
  1092                        	longa	on
  1093 00:06D1: 82 A8 00     	brl	L10012
  1094                        L10061:
  1095 00:06D4: 38           	sec
  1096 00:06D5: A5 09        	lda	<L52+ch_1
  1097 00:06D7: E9 41 00     	sbc	#<$41
  1098 00:06DA: 70 03        	bvs	L88
  1099 00:06DC: 49 00 80     	eor	#$8000
  1100                        L88:
  1101 00:06DF: 30 03        	bmi	L89
  1102 00:06E1: 82 21 00     	brl	L10062
  1103                        L89:
  1104 00:06E4: 38           	sec
  1105 00:06E5: A9 45 00     	lda	#$45
  1106 00:06E8: E5 09        	sbc	<L52+ch_1
  1107 00:06EA: 70 03        	bvs	L90
  1108 00:06EC: 49 00 80     	eor	#$8000
  1109                        L90:
  1110 00:06EF: 30 03        	bmi	L91
  1111 00:06F1: 82 11 00     	brl	L10062
  1112                        L91:
  1113 00:06F4: 18           	clc
  1114 00:06F5: A9 40 00     	lda	#$40
  1115 00:06F8: 65 09        	adc	<L52+ch_1
  1116 00:06FA: 48           	pha
  1117 00:06FB: 22 xx xx xx  	jsl	~~push_key
  1118 00:06FF: A9 00 00     	lda	#$0
  1119 00:0702: 82 96 FD     	brl	L66
  1120                        L10062:
  1121 00:0705: E2 20        	sep	#$20
  1122                        	longa	off
  1123 00:0707: 64 0B        	stz	<L52+ok_1
  1124 00:0709: C2 20        	rep	#$20
  1125                        	longa	on
  1126 00:070B: 82 6E 00     	brl	L10012
  1127                        L10063:
  1128                        L10064:
  1129                        L10065:
  1130                        L10066:
  1131                        L10067:
  1132                        L10068:
  1133                        L10069:
  Sun Jan  9 2022 20:52                                                Page 21


  1134                        L10070:
  1135                        L10071:
  1136                        L10072:
  1137                        L10073:
  1138                        L10074:
  1139                        L10075:
  1140                        L10076:
  1141                        L10077:
  1142                        L10078:
  1143                        L10079:
  1144                        L10080:
  1145                        L10081:
  1146                        L10082:
  1147 00:070E: A5 09        	lda	<L52+ch_1
  1148 00:0710: C9 7E 00     	cmp	#<$7e
  1149 00:0713: F0 03        	beq	L92
  1150 00:0715: 82 15 00     	brl	L10083
  1151                        L92:
  1152 00:0718: A5 05        	lda	<L52+state_1
  1153 00:071A: 0A           	asl	A
  1154 00:071B: 85 01        	sta	<R0
  1155 00:071D: A6 01        	ldx	<R0
  1156 00:071F: BD xx xx     	lda	|L53-22,X
  1157 00:0722: 48           	pha
  1158 00:0723: 22 xx xx xx  	jsl	~~push_key
  1159 00:0727: A9 00 00     	lda	#$0
  1160 00:072A: 82 6E FD     	brl	L66
  1161                        L10083:
  1162 00:072D: E2 20        	sep	#$20
  1163                        	longa	off
  1164 00:072F: 64 0B        	stz	<L52+ok_1
  1165 00:0731: C2 20        	rep	#$20
  1166                        	longa	on
  1167 00:0733: 82 46 00     	brl	L10012
  1168                        L10011:
  1169                        	xref	~~~fsw
  1170 00:0736: 22 xx xx xx  	jsl	~~~fsw
  1171 00:073A: 01 00        	dw	1
  1172 00:073C: 1E 00        	dw	30
  1173 00:073E: xx xx        	dw	L10012-1
  1174 00:0740: xx xx        	dw	L10013-1
  1175 00:0742: xx xx        	dw	L10018-1
  1176 00:0744: xx xx        	dw	L10020-1
  1177 00:0746: xx xx        	dw	L10037-1
  1178 00:0748: xx xx        	dw	L10043-1
  1179 00:074A: xx xx        	dw	L10049-1
  1180 00:074C: xx xx        	dw	L10055-1
  1181 00:074E: xx xx        	dw	L10057-1
  1182 00:0750: xx xx        	dw	L10059-1
  1183 00:0752: xx xx        	dw	L10061-1
  1184 00:0754: xx xx        	dw	L10063-1
  1185 00:0756: xx xx        	dw	L10064-1
  1186 00:0758: xx xx        	dw	L10065-1
  1187 00:075A: xx xx        	dw	L10066-1
  1188 00:075C: xx xx        	dw	L10067-1
  1189 00:075E: xx xx        	dw	L10068-1
  1190 00:0760: xx xx        	dw	L10069-1
  1191 00:0762: xx xx        	dw	L10070-1
  Sun Jan  9 2022 20:52                                                Page 22


  1192 00:0764: xx xx        	dw	L10071-1
  1193 00:0766: xx xx        	dw	L10072-1
  1194 00:0768: xx xx        	dw	L10073-1
  1195 00:076A: xx xx        	dw	L10074-1
  1196 00:076C: xx xx        	dw	L10075-1
  1197 00:076E: xx xx        	dw	L10076-1
  1198 00:0770: xx xx        	dw	L10077-1
  1199 00:0772: xx xx        	dw	L10078-1
  1200 00:0774: xx xx        	dw	L10079-1
  1201 00:0776: xx xx        	dw	L10080-1
  1202 00:0778: xx xx        	dw	L10081-1
  1203 00:077A: xx xx        	dw	L10082-1
  1204                        L10012:
  1205 00:077C: 82 9D FC     	brl	L10009
  1206                        L10010:
  1207 00:077F: A5 0B        	lda	<L52+ok_1
  1208 00:0781: 29 FF 00     	and	#$ff
  1209 00:0784: F0 03        	beq	L93
  1210 00:0786: 82 06 00     	brl	L10084
  1211                        L93:
  1212 00:0789: D4 09        	pei	<L52+ch_1
  1213 00:078B: 22 xx xx xx  	jsl	~~push_key
  1214                        L10084:
  1215 00:078F: A5 05        	lda	<L52+state_1
  1216 00:0791: 82 A9 00     	brl	L10085
  1217                        L10087:
  1218 00:0794: A9 1B 00     	lda	#$1b
  1219 00:0797: 82 01 FD     	brl	L66
  1220                        L10088:
  1221 00:079A: F4 4F 00     	pea	#<$4f
  1222 00:079D: 22 xx xx xx  	jsl	~~push_key
  1223 00:07A1: A9 1B 00     	lda	#$1b
  1224 00:07A4: 82 F4 FC     	brl	L66
  1225                        L10089:
  1226 00:07A7: 82 D9 00     	brl	L10086
  1227                        L10090:
  1228                        L10091:
  1229                        L10092:
  1230                        L10093:
  1231                        L10094:
  1232                        L10095:
  1233 00:07AA: 18           	clc
  1234 00:07AB: A9 2D 00     	lda	#$2d
  1235 00:07AE: 65 05        	adc	<L52+state_1
  1236 00:07B0: 48           	pha
  1237 00:07B1: 22 xx xx xx  	jsl	~~push_key
  1238 00:07B5: 82 CB 00     	brl	L10086
  1239                        L10096:
  1240 00:07B8: F4 5B 00     	pea	#<$5b
  1241 00:07BB: 22 xx xx xx  	jsl	~~push_key
  1242 00:07BF: 82 C1 00     	brl	L10086
  1243                        L10097:
  1244                        L10098:
  1245                        L10099:
  1246                        L10100:
  1247                        L10101:
  1248 00:07C2: 18           	clc
  1249 00:07C3: A9 F6 FF     	lda	#$fff6
  Sun Jan  9 2022 20:52                                                Page 23


  1250 00:07C6: 65 05        	adc	<L52+state_1
  1251 00:07C8: 48           	pha
  1252 00:07C9: 22 xx xx xx  	jsl	~~push_key
  1253 00:07CD: F4 31 00     	pea	#<$31
  1254 00:07D0: 22 xx xx xx  	jsl	~~push_key
  1255 00:07D4: 82 AC 00     	brl	L10086
  1256                        L10102:
  1257                        L10103:
  1258                        L10104:
  1259 00:07D7: 18           	clc
  1260 00:07D8: A9 27 00     	lda	#$27
  1261 00:07DB: 65 05        	adc	<L52+state_1
  1262 00:07DD: 48           	pha
  1263 00:07DE: 22 xx xx xx  	jsl	~~push_key
  1264 00:07E2: F4 31 00     	pea	#<$31
  1265 00:07E5: 22 xx xx xx  	jsl	~~push_key
  1266 00:07E9: 82 97 00     	brl	L10086
  1267                        L10105:
  1268                        L10106:
  1269 00:07EC: 18           	clc
  1270 00:07ED: A9 1D 00     	lda	#$1d
  1271 00:07F0: 65 05        	adc	<L52+state_1
  1272 00:07F2: 48           	pha
  1273 00:07F3: 22 xx xx xx  	jsl	~~push_key
  1274 00:07F7: F4 32 00     	pea	#<$32
  1275 00:07FA: 22 xx xx xx  	jsl	~~push_key
  1276 00:07FE: 82 82 00     	brl	L10086
  1277                        L10107:
  1278                        L10108:
  1279                        L10109:
  1280                        L10110:
  1281 00:0801: 18           	clc
  1282 00:0802: A9 1E 00     	lda	#$1e
  1283 00:0805: 65 05        	adc	<L52+state_1
  1284 00:0807: 48           	pha
  1285 00:0808: 22 xx xx xx  	jsl	~~push_key
  1286 00:080C: F4 32 00     	pea	#<$32
  1287 00:080F: 22 xx xx xx  	jsl	~~push_key
  1288 00:0813: 82 6D 00     	brl	L10086
  1289                        L10111:
  1290                        L10112:
  1291 00:0816: 18           	clc
  1292 00:0817: A9 1F 00     	lda	#$1f
  1293 00:081A: 65 05        	adc	<L52+state_1
  1294 00:081C: 48           	pha
  1295 00:081D: 22 xx xx xx  	jsl	~~push_key
  1296 00:0821: F4 32 00     	pea	#<$32
  1297 00:0824: 22 xx xx xx  	jsl	~~push_key
  1298                        L10113:
  1299                        L10114:
  1300                        L10115:
  1301                        L10116:
  1302 00:0828: 18           	clc
  1303 00:0829: A9 16 00     	lda	#$16
  1304 00:082C: 65 05        	adc	<L52+state_1
  1305 00:082E: 48           	pha
  1306 00:082F: 22 xx xx xx  	jsl	~~push_key
  1307 00:0833: F4 03 00     	pea	#<$3
  Sun Jan  9 2022 20:52                                                Page 24


  1308 00:0836: 22 xx xx xx  	jsl	~~push_key
  1309 00:083A: 82 46 00     	brl	L10086
  1310                        L10085:
  1311                        	xref	~~~fsw
  1312 00:083D: 22 xx xx xx  	jsl	~~~fsw
  1313 00:0841: 01 00        	dw	1
  1314 00:0843: 1E 00        	dw	30
  1315 00:0845: xx xx        	dw	L10086-1
  1316 00:0847: xx xx        	dw	L10087-1
  1317 00:0849: xx xx        	dw	L10088-1
  1318 00:084B: xx xx        	dw	L10089-1
  1319 00:084D: xx xx        	dw	L10090-1
  1320 00:084F: xx xx        	dw	L10091-1
  1321 00:0851: xx xx        	dw	L10092-1
  1322 00:0853: xx xx        	dw	L10093-1
  1323 00:0855: xx xx        	dw	L10094-1
  1324 00:0857: xx xx        	dw	L10095-1
  1325 00:0859: xx xx        	dw	L10096-1
  1326 00:085B: xx xx        	dw	L10097-1
  1327 00:085D: xx xx        	dw	L10098-1
  1328 00:085F: xx xx        	dw	L10099-1
  1329 00:0861: xx xx        	dw	L10100-1
  1330 00:0863: xx xx        	dw	L10101-1
  1331 00:0865: xx xx        	dw	L10102-1
  1332 00:0867: xx xx        	dw	L10103-1
  1333 00:0869: xx xx        	dw	L10104-1
  1334 00:086B: xx xx        	dw	L10105-1
  1335 00:086D: xx xx        	dw	L10106-1
  1336 00:086F: xx xx        	dw	L10107-1
  1337 00:0871: xx xx        	dw	L10108-1
  1338 00:0873: xx xx        	dw	L10109-1
  1339 00:0875: xx xx        	dw	L10110-1
  1340 00:0877: xx xx        	dw	L10111-1
  1341 00:0879: xx xx        	dw	L10112-1
  1342 00:087B: xx xx        	dw	L10113-1
  1343 00:087D: xx xx        	dw	L10114-1
  1344 00:087F: xx xx        	dw	L10115-1
  1345 00:0881: xx xx        	dw	L10116-1
  1346                        L10086:
  1347 00:0883: F4 5B 00     	pea	#<$5b
  1348 00:0886: 22 xx xx xx  	jsl	~~push_key
  1349 00:088A: A9 1B 00     	lda	#$1b
  1350 00:088D: 82 0B FC     	brl	L66
  1351             0000000B   L51	equ	11
  1352             00000005   L52	equ	5
  1353                        	ends
  1354                        	efunc
  1355                        	code
  1356                        	xdef	~~emulate_get
  1357                        	func
  1358                        ~~emulate_get:
  1359                        	longa	on
  1360                        	longi	on
  1361 00:0890: 3B           	tsc
  1362 00:0891: 38           	sec
  1363 00:0892: E9 13 00     	sbc	#L94
  1364 00:0895: 1B           	tcs
  1365 00:0896: 0B           	phd
  Sun Jan  9 2022 20:52                                                Page 25


  1366 00:0897: 5B           	tcd
  1367             00000000   ch_1	set	0
  1368             00000001   key_1	set	1
  1369             00000003   fn_keyno_1	set	3
  1370             00000005   errcode_1	set	5
  1371 00:0898: AD xx xx     	lda	|~~basicvars+423
  1372 00:089B: 89 00 02     	bit	#$200
  1373 00:089E: D0 03        	bne	L96
  1374 00:08A0: 82 0A 00     	brl	L10117
  1375                        L96:
  1376 00:08A3: F4 01 00     	pea	#<$1
  1377 00:08A6: F4 04 00     	pea	#4
  1378 00:08A9: 22 xx xx xx  	jsl	~~error
  1379                        L10117:
  1380 00:08AD: AD xx xx     	lda	|~~fn_string
  1381 00:08B0: 0D xx xx     	ora	|~~fn_string+2
  1382 00:08B3: D0 03        	bne	L97
  1383 00:08B5: 82 0E 00     	brl	L10118
  1384                        L97:
  1385 00:08B8: 22 xx xx xx  	jsl	~~read_fn_string
  1386                        L98:
  1387 00:08BC: A8           	tay
  1388 00:08BD: 2B           	pld
  1389 00:08BE: 3B           	tsc
  1390 00:08BF: 18           	clc
  1391 00:08C0: 69 13 00     	adc	#L94
  1392 00:08C3: 1B           	tcs
  1393 00:08C4: 98           	tya
  1394 00:08C5: 6B           	rtl
  1395                        L10118:
  1396 00:08C6: 38           	sec
  1397 00:08C7: A9 00 00     	lda	#$0
  1398 00:08CA: ED xx xx     	sbc	|~~holdcount
  1399 00:08CD: 70 03        	bvs	L99
  1400 00:08CF: 49 00 80     	eor	#$8000
  1401                        L99:
  1402 00:08D2: 10 03        	bpl	L100
  1403 00:08D4: 82 07 00     	brl	L10119
  1404                        L100:
  1405 00:08D7: 22 xx xx xx  	jsl	~~pop_key
  1406 00:08DB: 82 DE FF     	brl	L98
  1407                        L10119:
  1408 00:08DE: F4 00 00     	pea	#^$1
  1409 00:08E1: F4 01 00     	pea	#<$1
  1410 00:08E4: F4 00 00     	pea	#0
  1411 00:08E7: 18           	clc
  1412 00:08E8: 7B           	tdc
  1413 00:08E9: 69 0D 00     	adc	#<L95+ch_1
  1414 00:08EC: 48           	pha
  1415 00:08ED: AD xx xx     	lda	|~~keyboard
  1416 00:08F0: 48           	pha
  1417 00:08F1: 22 xx xx xx  	jsl	~~read
  1418 00:08F5: 85 12        	sta	<L95+errcode_1
  1419 00:08F7: A5 12        	lda	<L95+errcode_1
  1420 00:08F9: 30 03        	bmi	L101
  1421 00:08FB: 82 2F 00     	brl	L10120
  1422                        L101:
  1423 00:08FE: 22 xx xx xx  	jsl	~~__errno_location
  Sun Jan  9 2022 20:52                                                Page 26


  1424 00:0902: 85 01        	sta	<R0
  1425 00:0904: 86 03        	stx	<R0+2
  1426 00:0906: A7 01        	lda	[<R0]
  1427 00:0908: C9 20 00     	cmp	#<$20
  1428 00:090B: F0 03        	beq	L102
  1429 00:090D: 82 0A 00     	brl	L10121
  1430                        L102:
  1431 00:0910: F4 08 00     	pea	#<$8
  1432 00:0913: F4 04 00     	pea	#4
  1433 00:0916: 22 xx xx xx  	jsl	~~error
  1434                        L10121:
  1435 00:091A: F4 xx xx     	pea	#^L50
  1436 00:091D: F4 xx xx     	pea	#<L50
  1437 00:0920: F4 A6 02     	pea	#<$2a6
  1438 00:0923: F4 82 00     	pea	#<$82
  1439 00:0926: F4 0A 00     	pea	#10
  1440 00:0929: 22 xx xx xx  	jsl	~~error
  1441                        L10120:
  1442 00:092D: E2 20        	sep	#$20
  1443                        	longa	off
  1444 00:092F: A9 00        	lda	#$0
  1445 00:0931: 14 0D        	trb	<L95+ch_1
  1446 00:0933: C2 20        	rep	#$20
  1447                        	longa	on
  1448 00:0935: E2 20        	sep	#$20
  1449                        	longa	off
  1450 00:0937: A5 0D        	lda	<L95+ch_1
  1451 00:0939: C9 1B        	cmp	#<$1b
  1452 00:093B: C2 20        	rep	#$20
  1453                        	longa	on
  1454 00:093D: D0 03        	bne	L103
  1455 00:093F: 82 08 00     	brl	L10122
  1456                        L103:
  1457 00:0942: A5 0D        	lda	<L95+ch_1
  1458 00:0944: 29 FF 00     	and	#$ff
  1459 00:0947: 82 72 FF     	brl	L98
  1460                        L10122:
  1461 00:094A: 22 xx xx xx  	jsl	~~decode_sequence
  1462 00:094E: 85 0E        	sta	<L95+key_1
  1463 00:0950: A5 0E        	lda	<L95+key_1
  1464 00:0952: D0 03        	bne	L104
  1465 00:0954: 82 05 00     	brl	L10123
  1466                        L104:
  1467 00:0957: A5 0E        	lda	<L95+key_1
  1468 00:0959: 82 60 FF     	brl	L98
  1469                        L10123:
  1470 00:095C: 22 xx xx xx  	jsl	~~pop_key
  1471 00:0960: 85 0E        	sta	<L95+key_1
  1472 00:0962: D4 0E        	pei	<L95+key_1
  1473 00:0964: 22 xx xx xx  	jsl	~~is_fn_key
  1474 00:0968: 85 10        	sta	<L95+fn_keyno_1
  1475 00:096A: A5 10        	lda	<L95+fn_keyno_1
  1476 00:096C: F0 03        	beq	L105
  1477 00:096E: 82 0C 00     	brl	L10124
  1478                        L105:
  1479 00:0971: D4 0E        	pei	<L95+key_1
  1480 00:0973: 22 xx xx xx  	jsl	~~push_key
  1481 00:0977: A9 00 00     	lda	#$0
  Sun Jan  9 2022 20:52                                                Page 27


  1482 00:097A: 82 3F FF     	brl	L98
  1483                        L10124:
  1484 00:097D: A5 10        	lda	<L95+fn_keyno_1
  1485 00:097F: 0A           	asl	A
  1486 00:0980: 65 10        	adc	<L95+fn_keyno_1
  1487 00:0982: 0A           	asl	A
  1488 00:0983: 85 01        	sta	<R0
  1489 00:0985: 18           	clc
  1490 00:0986: A9 02 00     	lda	#$2
  1491 00:0989: 69 xx xx     	adc	#<~~fn_key
  1492 00:098C: 85 05        	sta	<R1
  1493 00:098E: 18           	clc
  1494 00:098F: A5 05        	lda	<R1
  1495 00:0991: 65 01        	adc	<R0
  1496 00:0993: 85 09        	sta	<R2
  1497 00:0995: B2 09        	lda	(<R2)
  1498 00:0997: A0 02 00     	ldy	#$2
  1499 00:099A: 11 09        	ora	(<R2),Y
  1500 00:099C: F0 03        	beq	L106
  1501 00:099E: 82 0C 00     	brl	L10125
  1502                        L106:
  1503 00:09A1: D4 0E        	pei	<L95+key_1
  1504 00:09A3: 22 xx xx xx  	jsl	~~push_key
  1505 00:09A7: A9 00 00     	lda	#$0
  1506 00:09AA: 82 0F FF     	brl	L98
  1507                        L10125:
  1508 00:09AD: D4 10        	pei	<L95+fn_keyno_1
  1509 00:09AF: 22 xx xx xx  	jsl	~~switch_fn_string
  1510 00:09B3: 82 06 FF     	brl	L98
  1511             00000013   L94	equ	19
  1512             0000000D   L95	equ	13
  1513                        	ends
  1514                        	efunc
  1515                        	data
  1516                        L50:
  1517 00:006B: 6B 65 79 62  	db	$6B,$65,$79,$62,$6F,$61,$72,$64,$00
       00:006F: 6F 61 72 64 
       00:0073: 00 
  1518 00:0074:              	ends
  1519                        	code
  1520                        	xdef	~~emulate_inkey
  1521                        	func
  1522                        ~~emulate_inkey:
  1523                        	longa	on
  1524                        	longi	on
  1525 00:09B6: 3B           	tsc
  1526 00:09B7: 38           	sec
  1527 00:09B8: E9 00 00     	sbc	#L108
  1528 00:09BB: 1B           	tcs
  1529 00:09BC: 0B           	phd
  1530 00:09BD: 5B           	tcd
  1531             00000004   arg_0	set	4
  1532 00:09BE: A5 04        	lda	<L108+arg_0
  1533 00:09C0: 10 03        	bpl	L110
  1534 00:09C2: 82 54 00     	brl	L10126
  1535                        L110:
  1536 00:09C5: AD xx xx     	lda	|~~basicvars+423
  1537 00:09C8: 89 00 02     	bit	#$200
  Sun Jan  9 2022 20:52                                                Page 28


  1538 00:09CB: D0 03        	bne	L111
  1539 00:09CD: 82 0A 00     	brl	L10127
  1540                        L111:
  1541 00:09D0: F4 01 00     	pea	#<$1
  1542 00:09D3: F4 04 00     	pea	#4
  1543 00:09D6: 22 xx xx xx  	jsl	~~error
  1544                        L10127:
  1545 00:09DA: 38           	sec
  1546 00:09DB: A9 FF 7F     	lda	#$7fff
  1547 00:09DE: E5 04        	sbc	<L108+arg_0
  1548 00:09E0: 70 03        	bvs	L112
  1549 00:09E2: 49 00 80     	eor	#$8000
  1550                        L112:
  1551 00:09E5: 10 03        	bpl	L113
  1552 00:09E7: 82 05 00     	brl	L10128
  1553                        L113:
  1554 00:09EA: A9 FF 7F     	lda	#$7fff
  1555 00:09ED: 85 04        	sta	<L108+arg_0
  1556                        L10128:
  1557 00:09EF: D4 04        	pei	<L108+arg_0
  1558 00:09F1: 22 xx xx xx  	jsl	~~waitkey
  1559 00:09F5: 29 FF 00     	and	#$ff
  1560 00:09F8: D0 03        	bne	L114
  1561 00:09FA: 82 16 00     	brl	L10129
  1562                        L114:
  1563 00:09FD: 22 xx xx xx  	jsl	~~emulate_get
  1564                        L115:
  1565 00:0A01: A8           	tay
  1566 00:0A02: A5 02        	lda	<L108+2
  1567 00:0A04: 85 04        	sta	<L108+2+2
  1568 00:0A06: A5 01        	lda	<L108+1
  1569 00:0A08: 85 03        	sta	<L108+1+2
  1570 00:0A0A: 2B           	pld
  1571 00:0A0B: 3B           	tsc
  1572 00:0A0C: 18           	clc
  1573 00:0A0D: 69 02 00     	adc	#L108+2
  1574 00:0A10: 1B           	tcs
  1575 00:0A11: 98           	tya
  1576 00:0A12: 6B           	rtl
  1577                        L10129:
  1578 00:0A13: A9 FF FF     	lda	#$ffff
  1579 00:0A16: 82 E8 FF     	brl	L115
  1580                        L10126:
  1581 00:0A19: A5 04        	lda	<L108+arg_0
  1582 00:0A1B: C9 00 FF     	cmp	#<$ffffff00
  1583 00:0A1E: F0 03        	beq	L116
  1584 00:0A20: 82 06 00     	brl	L10130
  1585                        L116:
  1586 00:0A23: A9 F6 00     	lda	#$f6
  1587 00:0A26: 82 D8 FF     	brl	L115
  1588                        L10130:
  1589 00:0A29: F4 01 00     	pea	#<$1
  1590 00:0A2C: F4 04 00     	pea	#4
  1591 00:0A2F: 22 xx xx xx  	jsl	~~error
  1592 00:0A33: A9 00 00     	lda	#$0
  1593 00:0A36: 82 C8 FF     	brl	L115
  1594             00000000   L108	equ	0
  1595             00000001   L109	equ	1
  Sun Jan  9 2022 20:52                                                Page 29


  1596                        	ends
  1597                        	efunc
  1598                        	code
  1599                        	func
  1600                        ~~display:
  1601                        	longa	on
  1602                        	longi	on
  1603 00:0A39: 3B           	tsc
  1604 00:0A3A: 38           	sec
  1605 00:0A3B: E9 00 00     	sbc	#L117
  1606 00:0A3E: 1B           	tcs
  1607 00:0A3F: 0B           	phd
  1608 00:0A40: 5B           	tcd
  1609             00000004   what_0	set	4
  1610             00000006   count_0	set	6
  1611 00:0A41: 22 xx xx xx  	jsl	~~echo_off
  1612                        L10131:
  1613 00:0A45: 38           	sec
  1614 00:0A46: A9 00 00     	lda	#$0
  1615 00:0A49: E5 06        	sbc	<L117+count_0
  1616 00:0A4B: 70 03        	bvs	L119
  1617 00:0A4D: 49 00 80     	eor	#$8000
  1618                        L119:
  1619 00:0A50: 10 03        	bpl	L120
  1620 00:0A52: 82 0F 00     	brl	L10132
  1621                        L120:
  1622 00:0A55: A5 04        	lda	<L117+what_0
  1623 00:0A57: 29 FF 00     	and	#$ff
  1624 00:0A5A: 48           	pha
  1625 00:0A5B: 22 xx xx xx  	jsl	~~emulate_vdu
  1626 00:0A5F: C6 06        	dec	<L117+count_0
  1627 00:0A61: 82 E1 FF     	brl	L10131
  1628                        L10132:
  1629 00:0A64: 22 xx xx xx  	jsl	~~echo_on
  1630                        L121:
  1631 00:0A68: A5 02        	lda	<L117+2
  1632 00:0A6A: 85 06        	sta	<L117+2+4
  1633 00:0A6C: A5 01        	lda	<L117+1
  1634 00:0A6E: 85 05        	sta	<L117+1+4
  1635 00:0A70: 2B           	pld
  1636 00:0A71: 3B           	tsc
  1637 00:0A72: 18           	clc
  1638 00:0A73: 69 04 00     	adc	#L117+4
  1639 00:0A76: 1B           	tcs
  1640 00:0A77: 6B           	rtl
  1641             00000000   L117	equ	0
  1642             00000001   L118	equ	1
  1643                        	ends
  1644                        	efunc
  1645                        	code
  1646                        	func
  1647                        ~~remove_history:
  1648                        	longa	on
  1649                        	longi	on
  1650 00:0A78: 3B           	tsc
  1651 00:0A79: 38           	sec
  1652 00:0A7A: E9 10 00     	sbc	#L122
  1653 00:0A7D: 1B           	tcs
  Sun Jan  9 2022 20:52                                                Page 30


  1654 00:0A7E: 0B           	phd
  1655 00:0A7F: 5B           	tcd
  1656             00000004   count_0	set	4
  1657             00000000   n_1	set	0
  1658             00000002   freed_1	set	2
  1659 00:0A80: 64 0F        	stz	<L123+freed_1
  1660 00:0A82: 64 0D        	stz	<L123+n_1
  1661 00:0A84: 82 11 00     	brl	L10136
  1662                        L10135:
  1663 00:0A87: A5 0D        	lda	<L123+n_1
  1664 00:0A89: 0A           	asl	A
  1665 00:0A8A: 85 01        	sta	<R0
  1666 00:0A8C: 18           	clc
  1667 00:0A8D: A6 01        	ldx	<R0
  1668 00:0A8F: BD xx xx     	lda	|~~histlength,X
  1669 00:0A92: 65 0F        	adc	<L123+freed_1
  1670 00:0A94: 85 0F        	sta	<L123+freed_1
  1671                        L10133:
  1672 00:0A96: E6 0D        	inc	<L123+n_1
  1673                        L10136:
  1674 00:0A98: 38           	sec
  1675 00:0A99: A5 0D        	lda	<L123+n_1
  1676 00:0A9B: E5 14        	sbc	<L122+count_0
  1677 00:0A9D: 70 03        	bvs	L124
  1678 00:0A9F: 49 00 80     	eor	#$8000
  1679                        L124:
  1680 00:0AA2: 30 03        	bmi	L125
  1681 00:0AA4: 82 E0 FF     	brl	L10135
  1682                        L125:
  1683                        L10134:
  1684 00:0AA7: 38           	sec
  1685 00:0AA8: A5 14        	lda	<L122+count_0
  1686 00:0AAA: ED xx xx     	sbc	|~~histindex
  1687 00:0AAD: 70 03        	bvs	L126
  1688 00:0AAF: 49 00 80     	eor	#$8000
  1689                        L126:
  1690 00:0AB2: 10 03        	bpl	L127
  1691 00:0AB4: 82 73 00     	brl	L10137
  1692                        L127:
  1693 00:0AB7: 38           	sec
  1694 00:0AB8: AD xx xx     	lda	|~~highbuffer
  1695 00:0ABB: E5 0F        	sbc	<L123+freed_1
  1696 00:0ABD: 85 01        	sta	<R0
  1697 00:0ABF: A0 00 00     	ldy	#$0
  1698 00:0AC2: A5 01        	lda	<R0
  1699 00:0AC4: 10 01        	bpl	L128
  1700 00:0AC6: 88           	dey
  1701                        L128:
  1702 00:0AC7: 85 01        	sta	<R0
  1703 00:0AC9: 84 03        	sty	<R0+2
  1704 00:0ACB: D4 03        	pei	<R0+2
  1705 00:0ACD: D4 01        	pei	<R0
  1706 00:0ACF: 18           	clc
  1707 00:0AD0: A9 xx xx     	lda	#<~~histbuffer
  1708 00:0AD3: 65 0F        	adc	<L123+freed_1
  1709 00:0AD5: 85 09        	sta	<R2
  1710 00:0AD7: A5 09        	lda	<R2
  1711 00:0AD9: 85 05        	sta	<R1
  Sun Jan  9 2022 20:52                                                Page 31


  1712                        	xref	_BEG_DATA
  1713 00:0ADB: A9 xx xx     	lda	#_BEG_DATA>>16
  1714 00:0ADE: 85 07        	sta	<R1+2
  1715 00:0AE0: D4 07        	pei	<R1+2
  1716 00:0AE2: D4 05        	pei	<R1
  1717 00:0AE4: A9 xx xx     	lda	#<~~histbuffer
  1718 00:0AE7: 85 09        	sta	<R2
  1719                        	xref	_BEG_DATA
  1720 00:0AE9: A9 xx xx     	lda	#_BEG_DATA>>16
  1721 00:0AEC: 85 0B        	sta	<R2+2
  1722 00:0AEE: D4 0B        	pei	<R2+2
  1723 00:0AF0: D4 09        	pei	<R2
  1724 00:0AF2: 22 xx xx xx  	jsl	~~memmove
  1725 00:0AF6: A5 14        	lda	<L122+count_0
  1726 00:0AF8: 85 0D        	sta	<L123+n_1
  1727 00:0AFA: 82 1D 00     	brl	L10141
  1728                        L10140:
  1729 00:0AFD: 38           	sec
  1730 00:0AFE: A5 0D        	lda	<L123+n_1
  1731 00:0B00: E5 14        	sbc	<L122+count_0
  1732 00:0B02: 85 05        	sta	<R1
  1733 00:0B04: A5 05        	lda	<R1
  1734 00:0B06: 0A           	asl	A
  1735 00:0B07: 85 01        	sta	<R0
  1736 00:0B09: A5 0D        	lda	<L123+n_1
  1737 00:0B0B: 0A           	asl	A
  1738 00:0B0C: 85 05        	sta	<R1
  1739 00:0B0E: A6 05        	ldx	<R1
  1740 00:0B10: BD xx xx     	lda	|~~histlength,X
  1741 00:0B13: A6 01        	ldx	<R0
  1742 00:0B15: 9D xx xx     	sta	|~~histlength,X
  1743                        L10138:
  1744 00:0B18: E6 0D        	inc	<L123+n_1
  1745                        L10141:
  1746 00:0B1A: 38           	sec
  1747 00:0B1B: A5 0D        	lda	<L123+n_1
  1748 00:0B1D: ED xx xx     	sbc	|~~histindex
  1749 00:0B20: 70 03        	bvs	L129
  1750 00:0B22: 49 00 80     	eor	#$8000
  1751                        L129:
  1752 00:0B25: 30 03        	bmi	L130
  1753 00:0B27: 82 D3 FF     	brl	L10140
  1754                        L130:
  1755                        L10139:
  1756                        L10137:
  1757 00:0B2A: 38           	sec
  1758 00:0B2B: AD xx xx     	lda	|~~highbuffer
  1759 00:0B2E: E5 0F        	sbc	<L123+freed_1
  1760 00:0B30: 8D xx xx     	sta	|~~highbuffer
  1761 00:0B33: 38           	sec
  1762 00:0B34: AD xx xx     	lda	|~~histindex
  1763 00:0B37: E5 14        	sbc	<L122+count_0
  1764 00:0B39: 8D xx xx     	sta	|~~histindex
  1765                        L131:
  1766 00:0B3C: A5 12        	lda	<L122+2
  1767 00:0B3E: 85 14        	sta	<L122+2+2
  1768 00:0B40: A5 11        	lda	<L122+1
  1769 00:0B42: 85 13        	sta	<L122+1+2
  Sun Jan  9 2022 20:52                                                Page 32


  1770 00:0B44: 2B           	pld
  1771 00:0B45: 3B           	tsc
  1772 00:0B46: 18           	clc
  1773 00:0B47: 69 12 00     	adc	#L122+2
  1774 00:0B4A: 1B           	tcs
  1775 00:0B4B: 6B           	rtl
  1776             00000010   L122	equ	16
  1777             0000000D   L123	equ	13
  1778                        	ends
  1779                        	efunc
  1780                        	code
  1781                        	func
  1782                        ~~add_history:
  1783                        	longa	on
  1784                        	longi	on
  1785 00:0B4C: 3B           	tsc
  1786 00:0B4D: 38           	sec
  1787 00:0B4E: E9 12 00     	sbc	#L132
  1788 00:0B51: 1B           	tcs
  1789 00:0B52: 0B           	phd
  1790 00:0B53: 5B           	tcd
  1791             00000004   command_0	set	4
  1792             00000008   cmdlen_0	set	8
  1793             00000000   wanted_1	set	0
  1794             00000002   n_1	set	2
  1795             00000004   freed_1	set	4
  1796 00:0B54: 18           	clc
  1797 00:0B55: AD xx xx     	lda	|~~highbuffer
  1798 00:0B58: 65 1A        	adc	<L132+cmdlen_0
  1799 00:0B5A: 85 01        	sta	<R0
  1800 00:0B5C: 38           	sec
  1801 00:0B5D: A5 01        	lda	<R0
  1802 00:0B5F: E9 00 04     	sbc	#<$400
  1803 00:0B62: 70 03        	bvs	L134
  1804 00:0B64: 49 00 80     	eor	#$8000
  1805                        L134:
  1806 00:0B67: 30 03        	bmi	L135
  1807 00:0B69: 82 4D 00     	brl	L10142
  1808                        L135:
  1809 00:0B6C: 18           	clc
  1810 00:0B6D: AD xx xx     	lda	|~~highbuffer
  1811 00:0B70: 65 1A        	adc	<L132+cmdlen_0
  1812 00:0B72: 85 01        	sta	<R0
  1813 00:0B74: 18           	clc
  1814 00:0B75: A9 01 FC     	lda	#$fc01
  1815 00:0B78: 65 01        	adc	<R0
  1816 00:0B7A: 85 0D        	sta	<L133+wanted_1
  1817 00:0B7C: 64 11        	stz	<L133+freed_1
  1818 00:0B7E: 64 0F        	stz	<L133+n_1
  1819                        L10145:
  1820 00:0B80: A5 0F        	lda	<L133+n_1
  1821 00:0B82: 0A           	asl	A
  1822 00:0B83: 85 01        	sta	<R0
  1823 00:0B85: 18           	clc
  1824 00:0B86: A6 01        	ldx	<R0
  1825 00:0B88: BD xx xx     	lda	|~~histlength,X
  1826 00:0B8B: 65 11        	adc	<L133+freed_1
  1827 00:0B8D: 85 11        	sta	<L133+freed_1
  Sun Jan  9 2022 20:52                                                Page 33


  1828 00:0B8F: E6 0F        	inc	<L133+n_1
  1829                        L10143:
  1830 00:0B91: 38           	sec
  1831 00:0B92: A5 0F        	lda	<L133+n_1
  1832 00:0B94: ED xx xx     	sbc	|~~histindex
  1833 00:0B97: 70 03        	bvs	L137
  1834 00:0B99: 49 00 80     	eor	#$8000
  1835                        L137:
  1836 00:0B9C: 10 03        	bpl	L138
  1837 00:0B9E: 82 0F 00     	brl	L136
  1838                        L138:
  1839 00:0BA1: 38           	sec
  1840 00:0BA2: A5 11        	lda	<L133+freed_1
  1841 00:0BA4: E5 0D        	sbc	<L133+wanted_1
  1842 00:0BA6: 70 03        	bvs	L139
  1843 00:0BA8: 49 00 80     	eor	#$8000
  1844                        L139:
  1845 00:0BAB: 30 03        	bmi	L140
  1846 00:0BAD: 82 D0 FF     	brl	L10145
  1847                        L140:
  1848                        L136:
  1849                        L10144:
  1850 00:0BB0: D4 0F        	pei	<L133+n_1
  1851 00:0BB2: 22 xx xx xx  	jsl	~~remove_history
  1852 00:0BB6: 82 12 00     	brl	L10146
  1853                        L10142:
  1854 00:0BB9: AD xx xx     	lda	|~~histindex
  1855 00:0BBC: C9 14 00     	cmp	#<$14
  1856 00:0BBF: F0 03        	beq	L141
  1857 00:0BC1: 82 07 00     	brl	L10147
  1858                        L141:
  1859 00:0BC4: F4 01 00     	pea	#<$1
  1860 00:0BC7: 22 xx xx xx  	jsl	~~remove_history
  1861                        L10147:
  1862                        L10146:
  1863 00:0BCB: A5 1A        	lda	<L132+cmdlen_0
  1864 00:0BCD: 1A           	ina
  1865 00:0BCE: 85 01        	sta	<R0
  1866 00:0BD0: A0 00 00     	ldy	#$0
  1867 00:0BD3: A5 01        	lda	<R0
  1868 00:0BD5: 10 01        	bpl	L142
  1869 00:0BD7: 88           	dey
  1870                        L142:
  1871 00:0BD8: 85 01        	sta	<R0
  1872 00:0BDA: 84 03        	sty	<R0+2
  1873 00:0BDC: D4 03        	pei	<R0+2
  1874 00:0BDE: D4 01        	pei	<R0
  1875 00:0BE0: D4 18        	pei	<L132+command_0+2
  1876 00:0BE2: D4 16        	pei	<L132+command_0
  1877 00:0BE4: 18           	clc
  1878 00:0BE5: A9 xx xx     	lda	#<~~histbuffer
  1879 00:0BE8: 6D xx xx     	adc	|~~highbuffer
  1880 00:0BEB: 85 09        	sta	<R2
  1881 00:0BED: A5 09        	lda	<R2
  1882 00:0BEF: 85 05        	sta	<R1
  1883                        	xref	_BEG_DATA
  1884 00:0BF1: A9 xx xx     	lda	#_BEG_DATA>>16
  1885 00:0BF4: 85 07        	sta	<R1+2
  Sun Jan  9 2022 20:52                                                Page 34


  1886 00:0BF6: D4 07        	pei	<R1+2
  1887 00:0BF8: D4 05        	pei	<R1
  1888 00:0BFA: 22 xx xx xx  	jsl	~~memmove
  1889 00:0BFE: AD xx xx     	lda	|~~histindex
  1890 00:0C01: 0A           	asl	A
  1891 00:0C02: 85 01        	sta	<R0
  1892 00:0C04: A5 1A        	lda	<L132+cmdlen_0
  1893 00:0C06: 1A           	ina
  1894 00:0C07: A6 01        	ldx	<R0
  1895 00:0C09: 9D xx xx     	sta	|~~histlength,X
  1896 00:0C0C: 18           	clc
  1897 00:0C0D: AD xx xx     	lda	|~~highbuffer
  1898 00:0C10: 65 1A        	adc	<L132+cmdlen_0
  1899 00:0C12: 85 01        	sta	<R0
  1900 00:0C14: A5 01        	lda	<R0
  1901 00:0C16: 1A           	ina
  1902 00:0C17: 8D xx xx     	sta	|~~highbuffer
  1903 00:0C1A: EE xx xx     	inc	|~~histindex
  1904                        L143:
  1905 00:0C1D: A5 14        	lda	<L132+2
  1906 00:0C1F: 85 1A        	sta	<L132+2+6
  1907 00:0C21: A5 13        	lda	<L132+1
  1908 00:0C23: 85 19        	sta	<L132+1+6
  1909 00:0C25: 2B           	pld
  1910 00:0C26: 3B           	tsc
  1911 00:0C27: 18           	clc
  1912 00:0C28: 69 18 00     	adc	#L132+6
  1913 00:0C2B: 1B           	tcs
  1914 00:0C2C: 6B           	rtl
  1915             00000012   L132	equ	18
  1916             0000000D   L133	equ	13
  1917                        	ends
  1918                        	efunc
  1919                        	code
  1920                        	func
  1921                        ~~init_recall:
  1922                        	longa	on
  1923                        	longi	on
  1924 00:0C2D: 3B           	tsc
  1925 00:0C2E: 38           	sec
  1926 00:0C2F: E9 00 00     	sbc	#L144
  1927 00:0C32: 1B           	tcs
  1928 00:0C33: 0B           	phd
  1929 00:0C34: 5B           	tcd
  1930 00:0C35: AD xx xx     	lda	|~~histindex
  1931 00:0C38: 8D xx xx     	sta	|~~recalline
  1932                        L146:
  1933 00:0C3B: 2B           	pld
  1934 00:0C3C: 3B           	tsc
  1935 00:0C3D: 18           	clc
  1936 00:0C3E: 69 00 00     	adc	#L144
  1937 00:0C41: 1B           	tcs
  1938 00:0C42: 6B           	rtl
  1939             00000000   L144	equ	0
  1940             00000001   L145	equ	1
  1941                        	ends
  1942                        	efunc
  1943                        	code
  Sun Jan  9 2022 20:52                                                Page 35


  1944                        	func
  1945                        ~~recall_histline:
  1946                        	longa	on
  1947                        	longi	on
  1948 00:0C43: 3B           	tsc
  1949 00:0C44: 38           	sec
  1950 00:0C45: E9 0E 00     	sbc	#L147
  1951 00:0C48: 1B           	tcs
  1952 00:0C49: 0B           	phd
  1953 00:0C4A: 5B           	tcd
  1954             00000004   buffer_0	set	4
  1955             00000008   updown_0	set	8
  1956             00000000   n_1	set	0
  1957             00000002   start_1	set	2
  1958             00000004   count_1	set	4
  1959 00:0C4B: A5 16        	lda	<L147+updown_0
  1960 00:0C4D: 30 03        	bmi	L149
  1961 00:0C4F: 82 1E 00     	brl	L10148
  1962                        L149:
  1963 00:0C52: AD xx xx     	lda	|~~recalline
  1964 00:0C55: F0 03        	beq	L150
  1965 00:0C57: 82 10 00     	brl	L10149
  1966                        L150:
  1967                        L151:
  1968 00:0C5A: A5 10        	lda	<L147+2
  1969 00:0C5C: 85 16        	sta	<L147+2+6
  1970 00:0C5E: A5 0F        	lda	<L147+1
  1971 00:0C60: 85 15        	sta	<L147+1+6
  1972 00:0C62: 2B           	pld
  1973 00:0C63: 3B           	tsc
  1974 00:0C64: 18           	clc
  1975 00:0C65: 69 14 00     	adc	#L147+6
  1976 00:0C68: 1B           	tcs
  1977 00:0C69: 6B           	rtl
  1978                        L10149:
  1979 00:0C6A: CE xx xx     	dec	|~~recalline
  1980 00:0C6D: 82 11 00     	brl	L10150
  1981                        L10148:
  1982 00:0C70: AD xx xx     	lda	|~~recalline
  1983 00:0C73: CD xx xx     	cmp	|~~histindex
  1984 00:0C76: F0 03        	beq	L152
  1985 00:0C78: 82 03 00     	brl	L10151
  1986                        L152:
  1987 00:0C7B: 82 DC FF     	brl	L151
  1988                        L10151:
  1989 00:0C7E: EE xx xx     	inc	|~~recalline
  1990                        L10150:
  1991 00:0C81: AD xx xx     	lda	|~~recalline
  1992 00:0C84: CD xx xx     	cmp	|~~histindex
  1993 00:0C87: F0 03        	beq	L153
  1994 00:0C89: 82 0B 00     	brl	L10152
  1995                        L153:
  1996 00:0C8C: E2 20        	sep	#$20
  1997                        	longa	off
  1998 00:0C8E: A9 00        	lda	#$0
  1999 00:0C90: 87 12        	sta	[<L147+buffer_0]
  2000 00:0C92: C2 20        	rep	#$20
  2001                        	longa	on
  Sun Jan  9 2022 20:52                                                Page 36


  2002 00:0C94: 82 45 00     	brl	L10153
  2003                        L10152:
  2004 00:0C97: 64 0B        	stz	<L148+start_1
  2005 00:0C99: 64 09        	stz	<L148+n_1
  2006 00:0C9B: 82 11 00     	brl	L10157
  2007                        L10156:
  2008 00:0C9E: A5 09        	lda	<L148+n_1
  2009 00:0CA0: 0A           	asl	A
  2010 00:0CA1: 85 01        	sta	<R0
  2011 00:0CA3: 18           	clc
  2012 00:0CA4: A6 01        	ldx	<R0
  2013 00:0CA6: BD xx xx     	lda	|~~histlength,X
  2014 00:0CA9: 65 0B        	adc	<L148+start_1
  2015 00:0CAB: 85 0B        	sta	<L148+start_1
  2016                        L10154:
  2017 00:0CAD: E6 09        	inc	<L148+n_1
  2018                        L10157:
  2019 00:0CAF: 38           	sec
  2020 00:0CB0: A5 09        	lda	<L148+n_1
  2021 00:0CB2: ED xx xx     	sbc	|~~recalline
  2022 00:0CB5: 70 03        	bvs	L154
  2023 00:0CB7: 49 00 80     	eor	#$8000
  2024                        L154:
  2025 00:0CBA: 30 03        	bmi	L155
  2026 00:0CBC: 82 DF FF     	brl	L10156
  2027                        L155:
  2028                        L10155:
  2029 00:0CBF: 18           	clc
  2030 00:0CC0: A9 xx xx     	lda	#<~~histbuffer
  2031 00:0CC3: 65 0B        	adc	<L148+start_1
  2032 00:0CC5: 85 05        	sta	<R1
  2033 00:0CC7: A5 05        	lda	<R1
  2034 00:0CC9: 85 01        	sta	<R0
  2035                        	xref	_BEG_DATA
  2036 00:0CCB: A9 xx xx     	lda	#_BEG_DATA>>16
  2037 00:0CCE: 85 03        	sta	<R0+2
  2038 00:0CD0: D4 03        	pei	<R0+2
  2039 00:0CD2: D4 01        	pei	<R0
  2040 00:0CD4: D4 14        	pei	<L147+buffer_0+2
  2041 00:0CD6: D4 12        	pei	<L147+buffer_0
  2042 00:0CD8: 22 xx xx xx  	jsl	~~strcpy
  2043                        L10153:
  2044 00:0CDC: AD xx xx     	lda	|~~place
  2045 00:0CDF: 48           	pha
  2046 00:0CE0: F4 08 00     	pea	#<$8
  2047 00:0CE3: 22 xx xx xx  	jsl	~~display
  2048 00:0CE7: D4 14        	pei	<L147+buffer_0+2
  2049 00:0CE9: D4 12        	pei	<L147+buffer_0
  2050 00:0CEB: 22 xx xx xx  	jsl	~~strlen
  2051 00:0CEF: 8D xx xx     	sta	|~~place
  2052 00:0CF2: 38           	sec
  2053 00:0CF3: A9 00 00     	lda	#$0
  2054 00:0CF6: ED xx xx     	sbc	|~~place
  2055 00:0CF9: 70 03        	bvs	L156
  2056 00:0CFB: 49 00 80     	eor	#$8000
  2057                        L156:
  2058 00:0CFE: 10 03        	bpl	L157
  2059 00:0D00: 82 0C 00     	brl	L10158
  Sun Jan  9 2022 20:52                                                Page 37


  2060                        L157:
  2061 00:0D03: AD xx xx     	lda	|~~place
  2062 00:0D06: 48           	pha
  2063 00:0D07: D4 14        	pei	<L147+buffer_0+2
  2064 00:0D09: D4 12        	pei	<L147+buffer_0
  2065 00:0D0B: 22 xx xx xx  	jsl	~~emulate_vdustr
  2066                        L10158:
  2067 00:0D0F: 38           	sec
  2068 00:0D10: AD xx xx     	lda	|~~highplace
  2069 00:0D13: ED xx xx     	sbc	|~~place
  2070 00:0D16: 85 0D        	sta	<L148+count_1
  2071 00:0D18: 38           	sec
  2072 00:0D19: A9 00 00     	lda	#$0
  2073 00:0D1C: E5 0D        	sbc	<L148+count_1
  2074 00:0D1E: 70 03        	bvs	L158
  2075 00:0D20: 49 00 80     	eor	#$8000
  2076                        L158:
  2077 00:0D23: 10 03        	bpl	L159
  2078 00:0D25: 82 12 00     	brl	L10159
  2079                        L159:
  2080 00:0D28: D4 0D        	pei	<L148+count_1
  2081 00:0D2A: F4 20 00     	pea	#<$20
  2082 00:0D2D: 22 xx xx xx  	jsl	~~display
  2083 00:0D31: D4 0D        	pei	<L148+count_1
  2084 00:0D33: F4 08 00     	pea	#<$8
  2085 00:0D36: 22 xx xx xx  	jsl	~~display
  2086                        L10159:
  2087 00:0D3A: AD xx xx     	lda	|~~place
  2088 00:0D3D: 8D xx xx     	sta	|~~highplace
  2089 00:0D40: 82 17 FF     	brl	L151
  2090             0000000E   L147	equ	14
  2091             00000009   L148	equ	9
  2092                        	ends
  2093                        	efunc
  2094                        	code
  2095                        	func
  2096                        ~~shift_down:
  2097                        	longa	on
  2098                        	longi	on
  2099 00:0D43: 3B           	tsc
  2100 00:0D44: 38           	sec
  2101 00:0D45: E9 06 00     	sbc	#L160
  2102 00:0D48: 1B           	tcs
  2103 00:0D49: 0B           	phd
  2104 00:0D4A: 5B           	tcd
  2105             00000004   buffer_0	set	4
  2106             00000008   offset_0	set	8
  2107             00000000   count_1	set	0
  2108 00:0D4B: 38           	sec
  2109 00:0D4C: AD xx xx     	lda	|~~highplace
  2110 00:0D4F: E5 0E        	sbc	<L160+offset_0
  2111 00:0D51: 85 05        	sta	<L161+count_1
  2112 00:0D53: CE xx xx     	dec	|~~highplace
  2113                        L10160:
  2114 00:0D56: 38           	sec
  2115 00:0D57: A5 0E        	lda	<L160+offset_0
  2116 00:0D59: ED xx xx     	sbc	|~~highplace
  2117 00:0D5C: 70 03        	bvs	L162
  Sun Jan  9 2022 20:52                                                Page 38


  2118 00:0D5E: 49 00 80     	eor	#$8000
  2119                        L162:
  2120 00:0D61: 10 03        	bpl	L163
  2121 00:0D63: 82 22 00     	brl	L10161
  2122                        L163:
  2123 00:0D66: A5 0E        	lda	<L160+offset_0
  2124 00:0D68: 1A           	ina
  2125 00:0D69: 85 01        	sta	<R0
  2126 00:0D6B: E2 20        	sep	#$20
  2127                        	longa	off
  2128 00:0D6D: A4 01        	ldy	<R0
  2129 00:0D6F: B7 0A        	lda	[<L160+buffer_0],Y
  2130 00:0D71: A4 0E        	ldy	<L160+offset_0
  2131 00:0D73: 97 0A        	sta	[<L160+buffer_0],Y
  2132 00:0D75: C2 20        	rep	#$20
  2133                        	longa	on
  2134 00:0D77: A4 0E        	ldy	<L160+offset_0
  2135 00:0D79: B7 0A        	lda	[<L160+buffer_0],Y
  2136 00:0D7B: 29 FF 00     	and	#$ff
  2137 00:0D7E: 48           	pha
  2138 00:0D7F: 22 xx xx xx  	jsl	~~emulate_vdu
  2139 00:0D83: E6 0E        	inc	<L160+offset_0
  2140 00:0D85: 82 CE FF     	brl	L10160
  2141                        L10161:
  2142 00:0D88: F4 7F 00     	pea	#<$7f
  2143 00:0D8B: 22 xx xx xx  	jsl	~~emulate_vdu
  2144 00:0D8F: D4 05        	pei	<L161+count_1
  2145 00:0D91: F4 08 00     	pea	#<$8
  2146 00:0D94: 22 xx xx xx  	jsl	~~display
  2147                        L164:
  2148 00:0D98: A5 08        	lda	<L160+2
  2149 00:0D9A: 85 0E        	sta	<L160+2+6
  2150 00:0D9C: A5 07        	lda	<L160+1
  2151 00:0D9E: 85 0D        	sta	<L160+1+6
  2152 00:0DA0: 2B           	pld
  2153 00:0DA1: 3B           	tsc
  2154 00:0DA2: 18           	clc
  2155 00:0DA3: 69 0C 00     	adc	#L160+6
  2156 00:0DA6: 1B           	tcs
  2157 00:0DA7: 6B           	rtl
  2158             00000006   L160	equ	6
  2159             00000005   L161	equ	5
  2160                        	ends
  2161                        	efunc
  2162                        	code
  2163                        	func
  2164                        ~~shift_up:
  2165                        	longa	on
  2166                        	longi	on
  2167 00:0DA8: 3B           	tsc
  2168 00:0DA9: 38           	sec
  2169 00:0DAA: E9 06 00     	sbc	#L165
  2170 00:0DAD: 1B           	tcs
  2171 00:0DAE: 0B           	phd
  2172 00:0DAF: 5B           	tcd
  2173             00000004   buffer_0	set	4
  2174             00000008   offset_0	set	8
  2175             00000000   n_1	set	0
  Sun Jan  9 2022 20:52                                                Page 39


  2176 00:0DB0: A5 0E        	lda	<L165+offset_0
  2177 00:0DB2: CD xx xx     	cmp	|~~highplace
  2178 00:0DB5: F0 03        	beq	L167
  2179 00:0DB7: 82 10 00     	brl	L10162
  2180                        L167:
  2181                        L168:
  2182 00:0DBA: A5 08        	lda	<L165+2
  2183 00:0DBC: 85 0E        	sta	<L165+2+6
  2184 00:0DBE: A5 07        	lda	<L165+1
  2185 00:0DC0: 85 0D        	sta	<L165+1+6
  2186 00:0DC2: 2B           	pld
  2187 00:0DC3: 3B           	tsc
  2188 00:0DC4: 18           	clc
  2189 00:0DC5: 69 0C 00     	adc	#L165+6
  2190 00:0DC8: 1B           	tcs
  2191 00:0DC9: 6B           	rtl
  2192                        L10162:
  2193 00:0DCA: AD xx xx     	lda	|~~highplace
  2194 00:0DCD: 85 05        	sta	<L166+n_1
  2195                        L10163:
  2196 00:0DCF: A5 0E        	lda	<L165+offset_0
  2197 00:0DD1: 1A           	ina
  2198 00:0DD2: 85 01        	sta	<R0
  2199 00:0DD4: 38           	sec
  2200 00:0DD5: A5 05        	lda	<L166+n_1
  2201 00:0DD7: E5 01        	sbc	<R0
  2202 00:0DD9: 70 03        	bvs	L169
  2203 00:0DDB: 49 00 80     	eor	#$8000
  2204                        L169:
  2205 00:0DDE: 30 03        	bmi	L170
  2206 00:0DE0: 82 19 00     	brl	L10164
  2207                        L170:
  2208 00:0DE3: 18           	clc
  2209 00:0DE4: A9 FF FF     	lda	#$ffff
  2210 00:0DE7: 65 05        	adc	<L166+n_1
  2211 00:0DE9: 85 01        	sta	<R0
  2212 00:0DEB: E2 20        	sep	#$20
  2213                        	longa	off
  2214 00:0DED: A4 01        	ldy	<R0
  2215 00:0DEF: B7 0A        	lda	[<L165+buffer_0],Y
  2216 00:0DF1: A4 05        	ldy	<L166+n_1
  2217 00:0DF3: 97 0A        	sta	[<L165+buffer_0],Y
  2218 00:0DF5: C2 20        	rep	#$20
  2219                        	longa	on
  2220 00:0DF7: C6 05        	dec	<L166+n_1
  2221 00:0DF9: 82 D3 FF     	brl	L10163
  2222                        L10164:
  2223 00:0DFC: 22 xx xx xx  	jsl	~~echo_off
  2224 00:0E00: F4 7F 00     	pea	#<$7f
  2225 00:0E03: 22 xx xx xx  	jsl	~~emulate_vdu
  2226 00:0E07: A5 0E        	lda	<L165+offset_0
  2227 00:0E09: 1A           	ina
  2228 00:0E0A: 85 05        	sta	<L166+n_1
  2229                        L10165:
  2230 00:0E0C: 38           	sec
  2231 00:0E0D: AD xx xx     	lda	|~~highplace
  2232 00:0E10: E5 05        	sbc	<L166+n_1
  2233 00:0E12: 70 03        	bvs	L171
  Sun Jan  9 2022 20:52                                                Page 40


  2234 00:0E14: 49 00 80     	eor	#$8000
  2235                        L171:
  2236 00:0E17: 30 03        	bmi	L172
  2237 00:0E19: 82 11 00     	brl	L10166
  2238                        L172:
  2239 00:0E1C: A4 05        	ldy	<L166+n_1
  2240 00:0E1E: B7 0A        	lda	[<L165+buffer_0],Y
  2241 00:0E20: 29 FF 00     	and	#$ff
  2242 00:0E23: 48           	pha
  2243 00:0E24: 22 xx xx xx  	jsl	~~emulate_vdu
  2244 00:0E28: E6 05        	inc	<L166+n_1
  2245 00:0E2A: 82 DF FF     	brl	L10165
  2246                        L10166:
  2247 00:0E2D: 22 xx xx xx  	jsl	~~echo_on
  2248                        L10167:
  2249 00:0E31: 38           	sec
  2250 00:0E32: A5 0E        	lda	<L165+offset_0
  2251 00:0E34: E5 05        	sbc	<L166+n_1
  2252 00:0E36: 70 03        	bvs	L173
  2253 00:0E38: 49 00 80     	eor	#$8000
  2254                        L173:
  2255 00:0E3B: 10 03        	bpl	L174
  2256 00:0E3D: 82 0C 00     	brl	L10168
  2257                        L174:
  2258 00:0E40: F4 08 00     	pea	#<$8
  2259 00:0E43: 22 xx xx xx  	jsl	~~emulate_vdu
  2260 00:0E47: C6 05        	dec	<L166+n_1
  2261 00:0E49: 82 E5 FF     	brl	L10167
  2262                        L10168:
  2263 00:0E4C: EE xx xx     	inc	|~~highplace
  2264 00:0E4F: 82 68 FF     	brl	L168
  2265             00000006   L165	equ	6
  2266             00000005   L166	equ	5
  2267                        	ends
  2268                        	efunc
  2269                        	code
  2270                        	xdef	~~emulate_readline
  2271                        	func
  2272                        ~~emulate_readline:
  2273                        	longa	on
  2274                        	longi	on
  2275 00:0E52: 3B           	tsc
  2276 00:0E53: 38           	sec
  2277 00:0E54: E9 0C 00     	sbc	#L175
  2278 00:0E57: 1B           	tcs
  2279 00:0E58: 0B           	phd
  2280 00:0E59: 5B           	tcd
  2281             00000004   buffer_0	set	4
  2282             00000008   length_0	set	8
  2283             00000000   ch_1	set	0
  2284             00000002   lastplace_1	set	2
  2285 00:0E5A: AD xx xx     	lda	|~~basicvars+423
  2286 00:0E5D: 89 00 02     	bit	#$200
  2287 00:0E60: D0 03        	bne	L177
  2288 00:0E62: 82 5E 00     	brl	L10169
  2289                        L177:
  2290             00000004   p_2	set	4
  2291 00:0E65: AD xx xx     	lda	|~~stdin+2
  Sun Jan  9 2022 20:52                                                Page 41


  2292 00:0E68: 48           	pha
  2293 00:0E69: AD xx xx     	lda	|~~stdin
  2294 00:0E6C: 48           	pha
  2295 00:0E6D: D4 14        	pei	<L175+length_0
  2296 00:0E6F: D4 12        	pei	<L175+buffer_0+2
  2297 00:0E71: D4 10        	pei	<L175+buffer_0
  2298 00:0E73: 22 xx xx xx  	jsl	~~fgets
  2299 00:0E77: 85 09        	sta	<L176+p_2
  2300 00:0E79: 86 0B        	stx	<L176+p_2+2
  2301 00:0E7B: A5 09        	lda	<L176+p_2
  2302 00:0E7D: 05 0B        	ora	<L176+p_2+2
  2303 00:0E7F: F0 03        	beq	L178
  2304 00:0E81: 82 39 00     	brl	L10170
  2305                        L178:
  2306 00:0E84: AD xx xx     	lda	|~~stdin+2
  2307 00:0E87: 48           	pha
  2308 00:0E88: AD xx xx     	lda	|~~stdin
  2309 00:0E8B: 48           	pha
  2310 00:0E8C: 22 xx xx xx  	jsl	~~ferror
  2311 00:0E90: AA           	tax
  2312 00:0E91: D0 03        	bne	L179
  2313 00:0E93: 82 0A 00     	brl	L10171
  2314                        L179:
  2315 00:0E96: F4 75 00     	pea	#<$75
  2316 00:0E99: F4 04 00     	pea	#4
  2317 00:0E9C: 22 xx xx xx  	jsl	~~error
  2318                        L10171:
  2319 00:0EA0: E2 20        	sep	#$20
  2320                        	longa	off
  2321 00:0EA2: A9 00        	lda	#$0
  2322 00:0EA4: 87 10        	sta	[<L175+buffer_0]
  2323 00:0EA6: C2 20        	rep	#$20
  2324                        	longa	on
  2325 00:0EA8: A9 02 00     	lda	#$2
  2326                        L180:
  2327 00:0EAB: A8           	tay
  2328 00:0EAC: A5 0E        	lda	<L175+2
  2329 00:0EAE: 85 14        	sta	<L175+2+6
  2330 00:0EB0: A5 0D        	lda	<L175+1
  2331 00:0EB2: 85 13        	sta	<L175+1+6
  2332 00:0EB4: 2B           	pld
  2333 00:0EB5: 3B           	tsc
  2334 00:0EB6: 18           	clc
  2335 00:0EB7: 69 12 00     	adc	#L175+6
  2336 00:0EBA: 1B           	tcs
  2337 00:0EBB: 98           	tya
  2338 00:0EBC: 6B           	rtl
  2339                        L10170:
  2340 00:0EBD: A9 00 00     	lda	#$0
  2341 00:0EC0: 82 E8 FF     	brl	L180
  2342                        L10169:
  2343 00:0EC3: D4 12        	pei	<L175+buffer_0+2
  2344 00:0EC5: D4 10        	pei	<L175+buffer_0
  2345 00:0EC7: 22 xx xx xx  	jsl	~~strlen
  2346 00:0ECB: 8D xx xx     	sta	|~~highplace
  2347 00:0ECE: 38           	sec
  2348 00:0ECF: A9 00 00     	lda	#$0
  2349 00:0ED2: ED xx xx     	sbc	|~~highplace
  Sun Jan  9 2022 20:52                                                Page 42


  2350 00:0ED5: 70 03        	bvs	L181
  2351 00:0ED7: 49 00 80     	eor	#$8000
  2352                        L181:
  2353 00:0EDA: 10 03        	bpl	L182
  2354 00:0EDC: 82 0C 00     	brl	L10172
  2355                        L182:
  2356 00:0EDF: AD xx xx     	lda	|~~highplace
  2357 00:0EE2: 48           	pha
  2358 00:0EE3: D4 12        	pei	<L175+buffer_0+2
  2359 00:0EE5: D4 10        	pei	<L175+buffer_0
  2360 00:0EE7: 22 xx xx xx  	jsl	~~emulate_vdustr
  2361                        L10172:
  2362 00:0EEB: AD xx xx     	lda	|~~highplace
  2363 00:0EEE: 8D xx xx     	sta	|~~place
  2364 00:0EF1: 18           	clc
  2365 00:0EF2: A9 FE FF     	lda	#$fffe
  2366 00:0EF5: 65 14        	adc	<L175+length_0
  2367 00:0EF7: 85 07        	sta	<L176+lastplace_1
  2368 00:0EF9: 22 xx xx xx  	jsl	~~init_recall
  2369                        L10175:
  2370 00:0EFD: 22 xx xx xx  	jsl	~~emulate_get
  2371 00:0F01: 85 05        	sta	<L176+ch_1
  2372 00:0F03: AD xx xx     	lda	|~~basicvars+489
  2373 00:0F06: 29 FF 00     	and	#$ff
  2374 00:0F09: D0 03        	bne	L183
  2375 00:0F0B: 82 06 00     	brl	L10176
  2376                        L183:
  2377 00:0F0E: A9 01 00     	lda	#$1
  2378 00:0F11: 82 97 FF     	brl	L180
  2379                        L10176:
  2380 00:0F14: A5 05        	lda	<L176+ch_1
  2381 00:0F16: 82 0C 03     	brl	L10177
  2382                        L10179:
  2383                        L10180:
  2384 00:0F19: F4 0D 00     	pea	#<$d
  2385 00:0F1C: 22 xx xx xx  	jsl	~~emulate_vdu
  2386 00:0F20: F4 0A 00     	pea	#<$a
  2387 00:0F23: 22 xx xx xx  	jsl	~~emulate_vdu
  2388 00:0F27: E2 20        	sep	#$20
  2389                        	longa	off
  2390 00:0F29: A9 00        	lda	#$0
  2391 00:0F2B: AC xx xx     	ldy	|~~highplace
  2392 00:0F2E: 97 10        	sta	[<L175+buffer_0],Y
  2393 00:0F30: C2 20        	rep	#$20
  2394                        	longa	on
  2395 00:0F32: 38           	sec
  2396 00:0F33: A9 00 00     	lda	#$0
  2397 00:0F36: ED xx xx     	sbc	|~~highplace
  2398 00:0F39: 70 03        	bvs	L184
  2399 00:0F3B: 49 00 80     	eor	#$8000
  2400                        L184:
  2401 00:0F3E: 10 03        	bpl	L185
  2402 00:0F40: 82 0C 00     	brl	L10181
  2403                        L185:
  2404 00:0F43: AD xx xx     	lda	|~~highplace
  2405 00:0F46: 48           	pha
  2406 00:0F47: D4 12        	pei	<L175+buffer_0+2
  2407 00:0F49: D4 10        	pei	<L175+buffer_0
  Sun Jan  9 2022 20:52                                                Page 43


  2408 00:0F4B: 22 xx xx xx  	jsl	~~add_history
  2409                        L10181:
  2410 00:0F4F: 82 17 03     	brl	L10178
  2411                        L10182:
  2412                        L10183:
  2413 00:0F52: 38           	sec
  2414 00:0F53: A9 00 00     	lda	#$0
  2415 00:0F56: ED xx xx     	sbc	|~~place
  2416 00:0F59: 70 03        	bvs	L186
  2417 00:0F5B: 49 00 80     	eor	#$8000
  2418                        L186:
  2419 00:0F5E: 10 03        	bpl	L187
  2420 00:0F60: 82 16 00     	brl	L10184
  2421                        L187:
  2422 00:0F63: F4 08 00     	pea	#<$8
  2423 00:0F66: 22 xx xx xx  	jsl	~~emulate_vdu
  2424 00:0F6A: CE xx xx     	dec	|~~place
  2425 00:0F6D: AD xx xx     	lda	|~~place
  2426 00:0F70: 48           	pha
  2427 00:0F71: D4 12        	pei	<L175+buffer_0+2
  2428 00:0F73: D4 10        	pei	<L175+buffer_0
  2429 00:0F75: 22 xx xx xx  	jsl	~~shift_down
  2430                        L10184:
  2431 00:0F79: 82 ED 02     	brl	L10178
  2432                        L10185:
  2433 00:0F7C: 38           	sec
  2434 00:0F7D: AD xx xx     	lda	|~~place
  2435 00:0F80: ED xx xx     	sbc	|~~highplace
  2436 00:0F83: 70 03        	bvs	L188
  2437 00:0F85: 49 00 80     	eor	#$8000
  2438                        L188:
  2439 00:0F88: 10 03        	bpl	L189
  2440 00:0F8A: 82 0C 00     	brl	L10186
  2441                        L189:
  2442 00:0F8D: AD xx xx     	lda	|~~place
  2443 00:0F90: 48           	pha
  2444 00:0F91: D4 12        	pei	<L175+buffer_0+2
  2445 00:0F93: D4 10        	pei	<L175+buffer_0
  2446 00:0F95: 22 xx xx xx  	jsl	~~shift_down
  2447                        L10186:
  2448 00:0F99: 82 CD 02     	brl	L10178
  2449                        L10187:
  2450 00:0F9C: 38           	sec
  2451 00:0F9D: AD xx xx     	lda	|~~highplace
  2452 00:0FA0: ED xx xx     	sbc	|~~place
  2453 00:0FA3: 48           	pha
  2454 00:0FA4: F4 7F 00     	pea	#<$7f
  2455 00:0FA7: 22 xx xx xx  	jsl	~~display
  2456 00:0FAB: 38           	sec
  2457 00:0FAC: AD xx xx     	lda	|~~highplace
  2458 00:0FAF: ED xx xx     	sbc	|~~place
  2459 00:0FB2: 48           	pha
  2460 00:0FB3: F4 08 00     	pea	#<$8
  2461 00:0FB6: 22 xx xx xx  	jsl	~~display
  2462 00:0FBA: AD xx xx     	lda	|~~place
  2463 00:0FBD: 8D xx xx     	sta	|~~highplace
  2464 00:0FC0: 82 A6 02     	brl	L10178
  2465                        L10188:
  Sun Jan  9 2022 20:52                                                Page 44


  2466 00:0FC3: AD xx xx     	lda	|~~place
  2467 00:0FC6: 48           	pha
  2468 00:0FC7: F4 08 00     	pea	#<$8
  2469 00:0FCA: 22 xx xx xx  	jsl	~~display
  2470 00:0FCE: AD xx xx     	lda	|~~highplace
  2471 00:0FD1: 48           	pha
  2472 00:0FD2: F4 7F 00     	pea	#<$7f
  2473 00:0FD5: 22 xx xx xx  	jsl	~~display
  2474 00:0FD9: AD xx xx     	lda	|~~highplace
  2475 00:0FDC: 48           	pha
  2476 00:0FDD: F4 08 00     	pea	#<$8
  2477 00:0FE0: 22 xx xx xx  	jsl	~~display
  2478 00:0FE4: 9C xx xx     	stz	|~~place
  2479 00:0FE7: 9C xx xx     	stz	|~~highplace
  2480 00:0FEA: 82 7C 02     	brl	L10178
  2481                        L10189:
  2482 00:0FED: 38           	sec
  2483 00:0FEE: A9 00 00     	lda	#$0
  2484 00:0FF1: ED xx xx     	sbc	|~~place
  2485 00:0FF4: 70 03        	bvs	L190
  2486 00:0FF6: 49 00 80     	eor	#$8000
  2487                        L190:
  2488 00:0FF9: 10 03        	bpl	L191
  2489 00:0FFB: 82 0A 00     	brl	L10190
  2490                        L191:
  2491 00:0FFE: F4 08 00     	pea	#<$8
  2492 00:1001: 22 xx xx xx  	jsl	~~emulate_vdu
  2493 00:1005: CE xx xx     	dec	|~~place
  2494                        L10190:
  2495 00:1008: 82 5E 02     	brl	L10178
  2496                        L10191:
  2497 00:100B: 38           	sec
  2498 00:100C: AD xx xx     	lda	|~~place
  2499 00:100F: ED xx xx     	sbc	|~~highplace
  2500 00:1012: 70 03        	bvs	L192
  2501 00:1014: 49 00 80     	eor	#$8000
  2502                        L192:
  2503 00:1017: 10 03        	bpl	L193
  2504 00:1019: 82 10 00     	brl	L10192
  2505                        L193:
  2506 00:101C: AC xx xx     	ldy	|~~place
  2507 00:101F: B7 10        	lda	[<L175+buffer_0],Y
  2508 00:1021: 29 FF 00     	and	#$ff
  2509 00:1024: 48           	pha
  2510 00:1025: 22 xx xx xx  	jsl	~~emulate_vdu
  2511 00:1029: EE xx xx     	inc	|~~place
  2512                        L10192:
  2513 00:102C: 82 3A 02     	brl	L10178
  2514                        L10193:
  2515 00:102F: F4 FF FF     	pea	#<$ffffffff
  2516 00:1032: D4 12        	pei	<L175+buffer_0+2
  2517 00:1034: D4 10        	pei	<L175+buffer_0
  2518 00:1036: 22 xx xx xx  	jsl	~~recall_histline
  2519 00:103A: 82 2C 02     	brl	L10178
  2520                        L10194:
  2521 00:103D: F4 01 00     	pea	#<$1
  2522 00:1040: D4 12        	pei	<L175+buffer_0+2
  2523 00:1042: D4 10        	pei	<L175+buffer_0
  Sun Jan  9 2022 20:52                                                Page 45


  2524 00:1044: 22 xx xx xx  	jsl	~~recall_histline
  2525 00:1048: 82 1E 02     	brl	L10178
  2526                        L10195:
  2527 00:104B: AD xx xx     	lda	|~~place
  2528 00:104E: 48           	pha
  2529 00:104F: F4 08 00     	pea	#<$8
  2530 00:1052: 22 xx xx xx  	jsl	~~display
  2531 00:1056: 9C xx xx     	stz	|~~place
  2532 00:1059: 82 0D 02     	brl	L10178
  2533                        L10196:
  2534 00:105C: 22 xx xx xx  	jsl	~~echo_off
  2535                        L10197:
  2536 00:1060: 38           	sec
  2537 00:1061: AD xx xx     	lda	|~~place
  2538 00:1064: ED xx xx     	sbc	|~~highplace
  2539 00:1067: 70 03        	bvs	L194
  2540 00:1069: 49 00 80     	eor	#$8000
  2541                        L194:
  2542 00:106C: 10 03        	bpl	L195
  2543 00:106E: 82 13 00     	brl	L10198
  2544                        L195:
  2545 00:1071: AC xx xx     	ldy	|~~place
  2546 00:1074: B7 10        	lda	[<L175+buffer_0],Y
  2547 00:1076: 29 FF 00     	and	#$ff
  2548 00:1079: 48           	pha
  2549 00:107A: 22 xx xx xx  	jsl	~~emulate_vdu
  2550 00:107E: EE xx xx     	inc	|~~place
  2551 00:1081: 82 DC FF     	brl	L10197
  2552                        L10198:
  2553 00:1084: 22 xx xx xx  	jsl	~~echo_on
  2554 00:1088: 82 DE 01     	brl	L10178
  2555                        L10199:
  2556 00:108B: AD xx xx     	lda	|~~place
  2557 00:108E: 48           	pha
  2558 00:108F: F4 08 00     	pea	#<$8
  2559 00:1092: 22 xx xx xx  	jsl	~~display
  2560 00:1096: 9C xx xx     	stz	|~~place
  2561 00:1099: 82 CD 01     	brl	L10178
  2562                        L10200:
  2563 00:109C: 22 xx xx xx  	jsl	~~emulate_get
  2564 00:10A0: 85 05        	sta	<L176+ch_1
  2565 00:10A2: A5 05        	lda	<L176+ch_1
  2566 00:10A4: 82 DA 00     	brl	L10201
  2567                        L10203:
  2568 00:10A7: 22 xx xx xx  	jsl	~~echo_off
  2569                        L10204:
  2570 00:10AB: 38           	sec
  2571 00:10AC: AD xx xx     	lda	|~~place
  2572 00:10AF: ED xx xx     	sbc	|~~highplace
  2573 00:10B2: 70 03        	bvs	L196
  2574 00:10B4: 49 00 80     	eor	#$8000
  2575                        L196:
  2576 00:10B7: 10 03        	bpl	L197
  2577 00:10B9: 82 13 00     	brl	L10205
  2578                        L197:
  2579 00:10BC: AC xx xx     	ldy	|~~place
  2580 00:10BF: B7 10        	lda	[<L175+buffer_0],Y
  2581 00:10C1: 29 FF 00     	and	#$ff
  Sun Jan  9 2022 20:52                                                Page 46


  2582 00:10C4: 48           	pha
  2583 00:10C5: 22 xx xx xx  	jsl	~~emulate_vdu
  2584 00:10C9: EE xx xx     	inc	|~~place
  2585 00:10CC: 82 DC FF     	brl	L10204
  2586                        L10205:
  2587 00:10CF: 22 xx xx xx  	jsl	~~echo_on
  2588 00:10D3: 82 CF 00     	brl	L10202
  2589                        L10206:
  2590 00:10D6: F4 FF FF     	pea	#<$ffffffff
  2591 00:10D9: D4 12        	pei	<L175+buffer_0+2
  2592 00:10DB: D4 10        	pei	<L175+buffer_0
  2593 00:10DD: 22 xx xx xx  	jsl	~~recall_histline
  2594 00:10E1: 82 C1 00     	brl	L10202
  2595                        L10207:
  2596 00:10E4: F4 01 00     	pea	#<$1
  2597 00:10E7: D4 12        	pei	<L175+buffer_0+2
  2598 00:10E9: D4 10        	pei	<L175+buffer_0
  2599 00:10EB: 22 xx xx xx  	jsl	~~recall_histline
  2600 00:10EF: 82 B3 00     	brl	L10202
  2601                        L10208:
  2602 00:10F2: 38           	sec
  2603 00:10F3: A9 00 00     	lda	#$0
  2604 00:10F6: ED xx xx     	sbc	|~~place
  2605 00:10F9: 70 03        	bvs	L198
  2606 00:10FB: 49 00 80     	eor	#$8000
  2607                        L198:
  2608 00:10FE: 10 03        	bpl	L199
  2609 00:1100: 82 0A 00     	brl	L10209
  2610                        L199:
  2611 00:1103: F4 08 00     	pea	#<$8
  2612 00:1106: 22 xx xx xx  	jsl	~~emulate_vdu
  2613 00:110A: CE xx xx     	dec	|~~place
  2614                        L10209:
  2615 00:110D: 82 95 00     	brl	L10202
  2616                        L10210:
  2617 00:1110: 38           	sec
  2618 00:1111: AD xx xx     	lda	|~~place
  2619 00:1114: ED xx xx     	sbc	|~~highplace
  2620 00:1117: 70 03        	bvs	L200
  2621 00:1119: 49 00 80     	eor	#$8000
  2622                        L200:
  2623 00:111C: 10 03        	bpl	L201
  2624 00:111E: 82 10 00     	brl	L10211
  2625                        L201:
  2626 00:1121: AC xx xx     	ldy	|~~place
  2627 00:1124: B7 10        	lda	[<L175+buffer_0],Y
  2628 00:1126: 29 FF 00     	and	#$ff
  2629 00:1129: 48           	pha
  2630 00:112A: 22 xx xx xx  	jsl	~~emulate_vdu
  2631 00:112E: EE xx xx     	inc	|~~place
  2632                        L10211:
  2633 00:1131: 82 71 00     	brl	L10202
  2634                        L10212:
  2635 00:1134: 38           	sec
  2636 00:1135: AD xx xx     	lda	|~~place
  2637 00:1138: ED xx xx     	sbc	|~~highplace
  2638 00:113B: 70 03        	bvs	L202
  2639 00:113D: 49 00 80     	eor	#$8000
  Sun Jan  9 2022 20:52                                                Page 47


  2640                        L202:
  2641 00:1140: 10 03        	bpl	L203
  2642 00:1142: 82 0C 00     	brl	L10213
  2643                        L203:
  2644 00:1145: AD xx xx     	lda	|~~place
  2645 00:1148: 48           	pha
  2646 00:1149: D4 12        	pei	<L175+buffer_0+2
  2647 00:114B: D4 10        	pei	<L175+buffer_0
  2648 00:114D: 22 xx xx xx  	jsl	~~shift_down
  2649                        L10213:
  2650 00:1151: 82 51 00     	brl	L10202
  2651                        L10214:
  2652 00:1154: 64 01        	stz	<R0
  2653 00:1156: AD xx xx     	lda	|~~enable_insert
  2654 00:1159: 29 FF 00     	and	#$ff
  2655 00:115C: F0 03        	beq	L205
  2656 00:115E: 82 02 00     	brl	L204
  2657                        L205:
  2658 00:1161: E6 01        	inc	<R0
  2659                        L204:
  2660 00:1163: E2 20        	sep	#$20
  2661                        	longa	off
  2662 00:1165: A5 01        	lda	<R0
  2663 00:1167: 8D xx xx     	sta	|~~enable_insert
  2664 00:116A: C2 20        	rep	#$20
  2665                        	longa	on
  2666 00:116C: AD xx xx     	lda	|~~enable_insert
  2667 00:116F: 48           	pha
  2668 00:1170: 22 xx xx xx  	jsl	~~set_cursor
  2669 00:1174: 82 2E 00     	brl	L10202
  2670                        L10215:
  2671 00:1177: F4 07 00     	pea	#<$7
  2672 00:117A: 22 xx xx xx  	jsl	~~emulate_vdu
  2673 00:117E: 82 24 00     	brl	L10202
  2674                        L10201:
  2675                        	xref	~~~swt
  2676 00:1181: 22 xx xx xx  	jsl	~~~swt
  2677 00:1185: 07 00        	dw	7
  2678 00:1187: 7F 00        	dw	127
  2679 00:1189: xx xx        	dw	L10212-1
  2680 00:118B: 8B 00        	dw	139
  2681 00:118D: xx xx        	dw	L10203-1
  2682 00:118F: 8C 00        	dw	140
  2683 00:1191: xx xx        	dw	L10208-1
  2684 00:1193: 8D 00        	dw	141
  2685 00:1195: xx xx        	dw	L10210-1
  2686 00:1197: 8E 00        	dw	142
  2687 00:1199: xx xx        	dw	L10207-1
  2688 00:119B: 8F 00        	dw	143
  2689 00:119D: xx xx        	dw	L10206-1
  2690 00:119F: CD 00        	dw	205
  2691 00:11A1: xx xx        	dw	L10214-1
  2692 00:11A3: xx xx        	dw	L10215-1
  2693                        L10202:
  2694 00:11A5: 82 C1 00     	brl	L10178
  2695                        L10216:
  2696 00:11A8: 38           	sec
  2697 00:11A9: A5 05        	lda	<L176+ch_1
  Sun Jan  9 2022 20:52                                                Page 48


  2698 00:11AB: E9 20 00     	sbc	#<$20
  2699 00:11AE: 70 03        	bvs	L206
  2700 00:11B0: 49 00 80     	eor	#$8000
  2701                        L206:
  2702 00:11B3: 10 03        	bpl	L207
  2703 00:11B5: 82 14 00     	brl	L10217
  2704                        L207:
  2705 00:11B8: A5 05        	lda	<L176+ch_1
  2706 00:11BA: C9 09 00     	cmp	#<$9
  2707 00:11BD: D0 03        	bne	L208
  2708 00:11BF: 82 0A 00     	brl	L10217
  2709                        L208:
  2710 00:11C2: F4 07 00     	pea	#<$7
  2711 00:11C5: 22 xx xx xx  	jsl	~~emulate_vdu
  2712 00:11C9: 82 56 00     	brl	L10218
  2713                        L10217:
  2714 00:11CC: AD xx xx     	lda	|~~highplace
  2715 00:11CF: C5 07        	cmp	<L176+lastplace_1
  2716 00:11D1: F0 03        	beq	L209
  2717 00:11D3: 82 0A 00     	brl	L10219
  2718                        L209:
  2719 00:11D6: F4 07 00     	pea	#<$7
  2720 00:11D9: 22 xx xx xx  	jsl	~~emulate_vdu
  2721 00:11DD: 82 42 00     	brl	L10220
  2722                        L10219:
  2723 00:11E0: AD xx xx     	lda	|~~enable_insert
  2724 00:11E3: 29 FF 00     	and	#$ff
  2725 00:11E6: D0 03        	bne	L210
  2726 00:11E8: 82 0C 00     	brl	L10221
  2727                        L210:
  2728 00:11EB: AD xx xx     	lda	|~~place
  2729 00:11EE: 48           	pha
  2730 00:11EF: D4 12        	pei	<L175+buffer_0+2
  2731 00:11F1: D4 10        	pei	<L175+buffer_0
  2732 00:11F3: 22 xx xx xx  	jsl	~~shift_up
  2733                        L10221:
  2734 00:11F7: E2 20        	sep	#$20
  2735                        	longa	off
  2736 00:11F9: A5 05        	lda	<L176+ch_1
  2737 00:11FB: AC xx xx     	ldy	|~~place
  2738 00:11FE: 97 10        	sta	[<L175+buffer_0],Y
  2739 00:1200: C2 20        	rep	#$20
  2740                        	longa	on
  2741 00:1202: D4 05        	pei	<L176+ch_1
  2742 00:1204: 22 xx xx xx  	jsl	~~emulate_vdu
  2743 00:1208: EE xx xx     	inc	|~~place
  2744 00:120B: 38           	sec
  2745 00:120C: AD xx xx     	lda	|~~highplace
  2746 00:120F: ED xx xx     	sbc	|~~place
  2747 00:1212: 70 03        	bvs	L211
  2748 00:1214: 49 00 80     	eor	#$8000
  2749                        L211:
  2750 00:1217: 10 03        	bpl	L212
  2751 00:1219: 82 06 00     	brl	L10222
  2752                        L212:
  2753 00:121C: AD xx xx     	lda	|~~place
  2754 00:121F: 8D xx xx     	sta	|~~highplace
  2755                        L10222:
  Sun Jan  9 2022 20:52                                                Page 49


  2756                        L10220:
  2757                        L10218:
  2758 00:1222: 82 44 00     	brl	L10178
  2759                        L10177:
  2760                        	xref	~~~swt
  2761 00:1225: 22 xx xx xx  	jsl	~~~swt
  2762 00:1229: 0F 00        	dw	15
  2763 00:122B: 00 00        	dw	0
  2764 00:122D: xx xx        	dw	L10200-1
  2765 00:122F: 01 00        	dw	1
  2766 00:1231: xx xx        	dw	L10195-1
  2767 00:1233: 02 00        	dw	2
  2768 00:1235: xx xx        	dw	L10189-1
  2769 00:1237: 04 00        	dw	4
  2770 00:1239: xx xx        	dw	L10185-1
  2771 00:123B: 05 00        	dw	5
  2772 00:123D: xx xx        	dw	L10196-1
  2773 00:123F: 06 00        	dw	6
  2774 00:1241: xx xx        	dw	L10191-1
  2775 00:1243: 08 00        	dw	8
  2776 00:1245: xx xx        	dw	L10182-1
  2777 00:1247: 0A 00        	dw	10
  2778 00:1249: xx xx        	dw	L10180-1
  2779 00:124B: 0B 00        	dw	11
  2780 00:124D: xx xx        	dw	L10187-1
  2781 00:124F: 0D 00        	dw	13
  2782 00:1251: xx xx        	dw	L10179-1
  2783 00:1253: 0E 00        	dw	14
  2784 00:1255: xx xx        	dw	L10194-1
  2785 00:1257: 10 00        	dw	16
  2786 00:1259: xx xx        	dw	L10193-1
  2787 00:125B: 15 00        	dw	21
  2788 00:125D: xx xx        	dw	L10188-1
  2789 00:125F: 1E 00        	dw	30
  2790 00:1261: xx xx        	dw	L10199-1
  2791 00:1263: 7F 00        	dw	127
  2792 00:1265: xx xx        	dw	L10183-1
  2793 00:1267: xx xx        	dw	L10216-1
  2794                        L10178:
  2795                        L10173:
  2796 00:1269: A5 05        	lda	<L176+ch_1
  2797 00:126B: C9 0D 00     	cmp	#<$d
  2798 00:126E: D0 03        	bne	L214
  2799 00:1270: 82 0A 00     	brl	L213
  2800                        L214:
  2801 00:1273: A5 05        	lda	<L176+ch_1
  2802 00:1275: C9 0A 00     	cmp	#<$a
  2803 00:1278: F0 03        	beq	L215
  2804 00:127A: 82 80 FC     	brl	L10175
  2805                        L215:
  2806                        L213:
  2807                        L10174:
  2808 00:127D: A9 00 00     	lda	#$0
  2809 00:1280: 82 28 FC     	brl	L180
  2810             0000000C   L175	equ	12
  2811             00000005   L176	equ	5
  2812                        	ends
  2813                        	efunc
  Sun Jan  9 2022 20:52                                                Page 50


  2814                        	code
  2815                        	xdef	~~init_keyboard
  2816                        	func
  2817                        ~~init_keyboard:
  2818                        	longa	on
  2819                        	longi	on
  2820 00:1283: 3B           	tsc
  2821 00:1284: 38           	sec
  2822 00:1285: E9 2C 00     	sbc	#L216
  2823 00:1288: 1B           	tcs
  2824 00:1289: 0B           	phd
  2825 00:128A: 5B           	tcd
  2826             00000000   tty_1	set	0
  2827             0000001C   n_1	set	28
  2828             0000001E   errcode_1	set	30
  2829 00:128B: 64 29        	stz	<L217+n_1
  2830                        L10225:
  2831 00:128D: A5 29        	lda	<L217+n_1
  2832 00:128F: 0A           	asl	A
  2833 00:1290: 65 29        	adc	<L217+n_1
  2834 00:1292: 0A           	asl	A
  2835 00:1293: 85 01        	sta	<R0
  2836 00:1295: 18           	clc
  2837 00:1296: A9 02 00     	lda	#$2
  2838 00:1299: 69 xx xx     	adc	#<~~fn_key
  2839 00:129C: 85 05        	sta	<R1
  2840 00:129E: 18           	clc
  2841 00:129F: A5 05        	lda	<R1
  2842 00:12A1: 65 01        	adc	<R0
  2843 00:12A3: 85 09        	sta	<R2
  2844 00:12A5: A9 00 00     	lda	#$0
  2845 00:12A8: 92 09        	sta	(<R2)
  2846 00:12AA: A9 00 00     	lda	#$0
  2847 00:12AD: A0 02 00     	ldy	#$2
  2848 00:12B0: 91 09        	sta	(<R2),Y
  2849                        L10223:
  2850 00:12B2: E6 29        	inc	<L217+n_1
  2851 00:12B4: 38           	sec
  2852 00:12B5: A5 29        	lda	<L217+n_1
  2853 00:12B7: E9 0F 00     	sbc	#<$f
  2854 00:12BA: 70 03        	bvs	L218
  2855 00:12BC: 49 00 80     	eor	#$8000
  2856                        L218:
  2857 00:12BF: 30 03        	bmi	L219
  2858 00:12C1: 82 C9 FF     	brl	L10225
  2859                        L219:
  2860                        L10224:
  2861 00:12C4: 9C xx xx     	stz	|~~fn_string_count
  2862 00:12C7: 9C xx xx     	stz	|~~fn_string
  2863 00:12CA: 9C xx xx     	stz	|~~fn_string+2
  2864 00:12CD: 9C xx xx     	stz	|~~holdcount
  2865 00:12D0: 9C xx xx     	stz	|~~histindex
  2866 00:12D3: 9C xx xx     	stz	|~~highbuffer
  2867 00:12D6: E2 20        	sep	#$20
  2868                        	longa	off
  2869 00:12D8: A9 01        	lda	#$1
  2870 00:12DA: 8D xx xx     	sta	|~~enable_insert
  2871 00:12DD: C2 20        	rep	#$20
  Sun Jan  9 2022 20:52                                                Page 51


  2872                        	longa	on
  2873 00:12DF: AD xx xx     	lda	|~~enable_insert
  2874 00:12E2: 48           	pha
  2875 00:12E3: 22 xx xx xx  	jsl	~~set_cursor
  2876 00:12E7: AD xx xx     	lda	|~~stdin+2
  2877 00:12EA: 48           	pha
  2878 00:12EB: AD xx xx     	lda	|~~stdin
  2879 00:12EE: 48           	pha
  2880 00:12EF: 22 xx xx xx  	jsl	~~fileno
  2881 00:12F3: 8D xx xx     	sta	|~~keyboard
  2882 00:12F6: F4 00 00     	pea	#0
  2883 00:12F9: 18           	clc
  2884 00:12FA: 7B           	tdc
  2885 00:12FB: 69 0D 00     	adc	#<L217+tty_1
  2886 00:12FE: 48           	pha
  2887 00:12FF: AD xx xx     	lda	|~~keyboard
  2888 00:1302: 48           	pha
  2889 00:1303: 22 xx xx xx  	jsl	~~tcgetattr
  2890 00:1307: 85 2B        	sta	<L217+errcode_1
  2891 00:1309: A5 2B        	lda	<L217+errcode_1
  2892 00:130B: 30 03        	bmi	L220
  2893 00:130D: 82 2B 00     	brl	L10226
  2894                        L220:
  2895 00:1310: 22 xx xx xx  	jsl	~~__errno_location
  2896 00:1314: 85 01        	sta	<R0
  2897 00:1316: 86 03        	stx	<R0+2
  2898 00:1318: A7 01        	lda	[<R0]
  2899 00:131A: C9 09 00     	cmp	#<$9
  2900 00:131D: D0 03        	bne	L221
  2901 00:131F: 82 0D 00     	brl	L10227
  2902                        L221:
  2903 00:1322: A9 00 00     	lda	#$0
  2904                        L222:
  2905 00:1325: A8           	tay
  2906 00:1326: 2B           	pld
  2907 00:1327: 3B           	tsc
  2908 00:1328: 18           	clc
  2909 00:1329: 69 2C 00     	adc	#L216
  2910 00:132C: 1B           	tcs
  2911 00:132D: 98           	tya
  2912 00:132E: 6B           	rtl
  2913                        L10227:
  2914 00:132F: A9 00 02     	lda	#$200
  2915 00:1332: 0C xx xx     	tsb	~~basicvars+423
  2916 00:1335: A9 01 00     	lda	#$1
  2917 00:1338: 82 EA FF     	brl	L222
  2918                        L10226:
  2919 00:133B: 18           	clc
  2920 00:133C: 7B           	tdc
  2921 00:133D: 69 0D 00     	adc	#<L217+tty_1
  2922 00:1340: 85 01        	sta	<R0
  2923 00:1342: A9 00 00     	lda	#$0
  2924 00:1345: 85 03        	sta	<R0+2
  2925 00:1347: D4 03        	pei	<R0+2
  2926 00:1349: D4 01        	pei	<R0
  2927 00:134B: F4 xx xx     	pea	#<~~origtty
  2928 00:134E: A9 1C 00     	lda	#$1c
  2929                        	xref	~~~fnmov
  Sun Jan  9 2022 20:52                                                Page 52


  2930 00:1351: 22 xx xx xx  	jsl	~~~fnmov
  2931 00:1355: A9 C0 00     	lda	#$c0
  2932 00:1358: 14 13        	trb	<L217+tty_1+6
  2933 00:135A: A9 0A 00     	lda	#$a
  2934 00:135D: 14 13        	trb	<L217+tty_1+6
  2935 00:135F: A9 40 01     	lda	#$140
  2936 00:1362: 14 0D        	trb	<L217+tty_1
  2937 00:1364: A9 80 00     	lda	#$80
  2938 00:1367: 04 11        	tsb	<L217+tty_1+4
  2939 00:1369: E2 20        	sep	#$20
  2940                        	longa	off
  2941 00:136B: A9 01        	lda	#$1
  2942 00:136D: 85 1B        	sta	<L217+tty_1+14
  2943 00:136F: C2 20        	rep	#$20
  2944                        	longa	on
  2945 00:1371: E2 20        	sep	#$20
  2946                        	longa	off
  2947 00:1373: A9 01        	lda	#$1
  2948 00:1375: 85 1C        	sta	<L217+tty_1+15
  2949 00:1377: C2 20        	rep	#$20
  2950                        	longa	on
  2951 00:1379: F4 00 00     	pea	#0
  2952 00:137C: 18           	clc
  2953 00:137D: 7B           	tdc
  2954 00:137E: 69 0D 00     	adc	#<L217+tty_1
  2955 00:1381: 48           	pha
  2956 00:1382: F4 01 00     	pea	#<$1
  2957 00:1385: AD xx xx     	lda	|~~keyboard
  2958 00:1388: 48           	pha
  2959 00:1389: 22 xx xx xx  	jsl	~~tcsetattr
  2960 00:138D: 85 2B        	sta	<L217+errcode_1
  2961 00:138F: A5 2B        	lda	<L217+errcode_1
  2962 00:1391: 30 03        	bmi	L223
  2963 00:1393: 82 06 00     	brl	L10228
  2964                        L223:
  2965 00:1396: A9 00 00     	lda	#$0
  2966 00:1399: 82 89 FF     	brl	L222
  2967                        L10228:
  2968 00:139C: A9 01 00     	lda	#$1
  2969 00:139F: 82 83 FF     	brl	L222
  2970             0000002C   L216	equ	44
  2971             0000000D   L217	equ	13
  2972                        	ends
  2973                        	efunc
  2974                        	code
  2975                        	xdef	~~end_keyboard
  2976                        	func
  2977                        ~~end_keyboard:
  2978                        	longa	on
  2979                        	longi	on
  2980 00:13A2: 3B           	tsc
  2981 00:13A3: 38           	sec
  2982 00:13A4: E9 08 00     	sbc	#L224
  2983 00:13A7: 1B           	tcs
  2984 00:13A8: 0B           	phd
  2985 00:13A9: 5B           	tcd
  2986 00:13AA: A9 xx xx     	lda	#<~~origtty
  2987 00:13AD: 85 01        	sta	<R0
  Sun Jan  9 2022 20:52                                                Page 53


  2988                        	xref	_BEG_DATA
  2989 00:13AF: A9 xx xx     	lda	#_BEG_DATA>>16
  2990 00:13B2: 85 03        	sta	<R0+2
  2991 00:13B4: D4 03        	pei	<R0+2
  2992 00:13B6: D4 01        	pei	<R0
  2993 00:13B8: F4 01 00     	pea	#<$1
  2994 00:13BB: AD xx xx     	lda	|~~keyboard
  2995 00:13BE: 48           	pha
  2996 00:13BF: 22 xx xx xx  	jsl	~~tcsetattr
  2997                        L226:
  2998 00:13C3: 2B           	pld
  2999 00:13C4: 3B           	tsc
  3000 00:13C5: 18           	clc
  3001 00:13C6: 69 08 00     	adc	#L224
  3002 00:13C9: 1B           	tcs
  3003 00:13CA: 6B           	rtl
  3004             00000008   L224	equ	8
  3005             00000009   L225	equ	9
  3006                        	ends
  3007                        	efunc
  3008                        	xref	~~tcsetattr
  3009                        	xref	~~tcgetattr
  3010                        	xref	~~read
  3011                        	xref	~~__errno_location
  3012                        	xref	~~free
  3013                        	xref	~~malloc
  3014                        	xref	~~emulate_vdustr
  3015                        	xref	~~emulate_vdu
  3016                        	xref	~~set_cursor
  3017                        	xref	~~echo_off
  3018                        	xref	~~echo_on
  3019                        	xref	~~error
  3020                        	xref	~~strlen
  3021                        	xref	~~memcpy
  3022                        	xref	~~memset
  3023                        	xref	~~memmove
  3024                        	xref	~~strcpy
  3025                        	xref	~~fileno
  3026                        	xref	~~ferror
  3027                        	xref	~~fgets
  3028                        	udata
  3029                        ~~keyboard
  3030 00:0000:              	ds	2
  3031 00:0002:              	ends
  3032                        	udata
  3033                        ~~origtty
  3034 00:0002:              	ds	28
  3035 00:001E:              	ends
  3036                        	udata
  3037                        ~~fn_string_count
  3038 00:001E:              	ds	2
  3039 00:0020:              	ends
  3040                        	udata
  3041                        ~~fn_string
  3042 00:0020:              	ds	4
  3043 00:0024:              	ends
  3044                        	udata
  3045                        ~~holdstack
  Sun Jan  9 2022 20:52                                                Page 54


  3046 00:0024:              	ds	16
  3047 00:0034:              	ends
  3048                        	udata
  3049                        ~~holdcount
  3050 00:0034:              	ds	2
  3051 00:0036:              	ends
  3052                        	udata
  3053                        ~~fn_key
  3054 00:0036:              	ds	90
  3055 00:0090:              	ends
  3056                        	udata
  3057                        ~~histlength
  3058 00:0090:              	ds	40
  3059 00:00B8:              	ends
  3060                        	udata
  3061                        ~~histbuffer
  3062 00:00B8:              	ds	1024
  3063 00:04B8:              	ends
  3064                        	udata
  3065                        ~~enable_insert
  3066 00:04B8:              	ds	1
  3067 00:04B9:              	ends
  3068                        	udata
  3069                        ~~recalline
  3070 00:04B9:              	ds	2
  3071 00:04BB:              	ends
  3072                        	udata
  3073                        ~~highbuffer
  3074 00:04BB:              	ds	2
  3075 00:04BD:              	ends
  3076                        	udata
  3077                        ~~histindex
  3078 00:04BD:              	ds	2
  3079 00:04BF:              	ends
  3080                        	udata
  3081                        ~~highplace
  3082 00:04BF:              	ds	2
  3083 00:04C1:              	ends
  3084                        	udata
  3085                        ~~place
  3086 00:04C1:              	ds	2
  3087 00:04C3:              	ends
  3088                        	xref	~~basicvars
  3089                        	xref	~~stdin
  3090                        	end


      Lines assembled: 3090
      Errors: 0
